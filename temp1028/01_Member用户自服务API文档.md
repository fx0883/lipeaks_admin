# Memberç”¨æˆ·è‡ªæœåŠ¡ API æ–‡æ¡£

> **é€‚ç”¨å¯¹è±¡**: å‰ç«¯å¼€å‘äººå‘˜ï¼ˆiOS/Web/Androidï¼‰  
> **Base URL**: `/api/v1/members/`  
> **æ–‡æ¡£ç‰ˆæœ¬**: 2.0  
> **æœ€åæ›´æ–°**: 2025-10-31

---

## ğŸ“‹ ç›®å½•

1. [è®¤è¯è¯´æ˜](#è®¤è¯è¯´æ˜)
2. [è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯](#1-è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯)
3. [æ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯](#2-æ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯)
4. [ä¿®æ”¹å¯†ç ](#3-ä¿®æ”¹å¯†ç )
5. [ä¸Šä¼ å¤´åƒ](#4-ä¸Šä¼ å¤´åƒ)
6. [é›†æˆæµç¨‹](#é›†æˆæµç¨‹)
7. [é”™è¯¯å¤„ç†](#é”™è¯¯å¤„ç†)

---

## è®¤è¯è¯´æ˜

### HTTPè¯·æ±‚å¤´è¦æ±‚

æ‰€æœ‰APIè¯·æ±‚éƒ½éœ€è¦åœ¨HTTPå¤´ä¸­åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š

```
Authorization: Bearer <your_jwt_token>
X-Tenant-ID: <tenant_id>
Content-Type: application/json
```

### è·å–Tokenæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‘é€ç™»å½•è¯·æ±‚    â”‚
â”‚  POST /auth/    â”‚
â”‚  member/login/  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è·å–Token      â”‚
â”‚  access +       â”‚
â”‚  refresh        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¿å­˜Tokenåˆ°    â”‚
â”‚  æœ¬åœ°å­˜å‚¨       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç™»å½•æ¥å£**:
- **URL**: `POST /api/v1/auth/member/login/`
- **è¯·æ±‚ä½“**: `{"username": "xxx", "password": "xxx"}`
- **å“åº”**: `{"access": "token", "refresh": "token"}`

---

## 1. è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

### æ¥å£ä¿¡æ¯
- **URL**: `/api/v1/members/me/`
- **æ–¹æ³•**: `GET`
- **æƒé™**: éœ€è¦è®¤è¯ï¼Œä»…Memberç”¨æˆ·

### è¯·æ±‚ç¤ºä¾‹

```http
GET /api/v1/members/me/ HTTP/1.1
Host: your-domain.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGc...
X-Tenant-ID: 1
```

### å“åº”æ ¼å¼

**æˆåŠŸå“åº” (200)**:
```json
{
  "id": 10,
  "username": "john_doe",
  "email": "john@example.com",
  "phone": "13800138000",
  "nick_name": "John",
  "avatar": "/media/avatars/user-avatar.jpg",
  "wechat_id": "john_wechat",
  "status": "active",
  "tenant": 1,
  "tenant_name": "ç¤ºä¾‹å…¬å¸",
  "is_sub_account": false,
  "parent": null,
  "parent_username": null,
  "last_login": "2025-10-31T10:30:00Z",
  "date_joined": "2025-01-15T08:00:00Z"
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | integer | ç”¨æˆ·ID |
| username | string | ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰ |
| email | string | é‚®ç®±åœ°å€ |
| phone | string | æ‰‹æœºå·ç  |
| nick_name | string | æ˜µç§° |
| avatar | string | å¤´åƒURLï¼ˆç›¸å¯¹è·¯å¾„ï¼‰ |
| wechat_id | string | å¾®ä¿¡å· |
| status | string | è´¦å·çŠ¶æ€ï¼šactive/suspended/inactive |
| tenant | integer | æ‰€å±ç§Ÿæˆ·ID |
| tenant_name | string | ç§Ÿæˆ·åç§° |
| is_sub_account | boolean | æ˜¯å¦ä¸ºå­è´¦å· |
| parent | integer/null | çˆ¶è´¦å·ID |
| parent_username | string/null | çˆ¶è´¦å·ç”¨æˆ·å |
| last_login | string | æœ€åç™»å½•æ—¶é—´ï¼ˆISO 8601ï¼‰ |
| date_joined | string | æ³¨å†Œæ—¶é—´ï¼ˆISO 8601ï¼‰ |

### å¤´åƒURLå¤„ç†

- å“åº”ä¸­çš„`avatar`å­—æ®µæ˜¯**ç›¸å¯¹è·¯å¾„**ï¼ˆå¦‚ï¼š`/media/avatars/xxx.jpg`ï¼‰
- éœ€è¦æ‹¼æ¥å®Œæ•´URLï¼š`https://your-domain.com` + `avatar`
- å¦‚æœavatarä¸ºç©ºå­—ç¬¦ä¸²ï¼Œä½¿ç”¨é»˜è®¤å¤´åƒ

---

## 2. æ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯

### æ¥å£ä¿¡æ¯
- **URL**: `/api/v1/members/me/`
- **æ–¹æ³•**: `PUT`
- **æƒé™**: éœ€è¦è®¤è¯ï¼Œä»…Memberç”¨æˆ·
- **Content-Type**: `application/json`

### è¯·æ±‚å‚æ•°

| å­—æ®µå | ç±»å‹ | å¿…å¡« | å¯ä¿®æ”¹ | è¯´æ˜ |
|--------|------|------|--------|------|
| username | string | - | âŒ | ç”¨æˆ·åï¼ˆä¸å¯ä¿®æ”¹ï¼‰ |
| email | string | - | âŒ | é‚®ç®±ï¼ˆä¸å¯ä¿®æ”¹ï¼‰ |
| nick_name | string | å¦ | âœ… | æ˜µç§°ï¼Œæœ€å¤§30å­—ç¬¦ |
| phone | string | å¦ | âœ… | æ‰‹æœºå·ï¼Œ11ä½æ•°å­— |
| wechat_id | string | å¦ | âœ… | å¾®ä¿¡å·ï¼Œæœ€å¤§32å­—ç¬¦ |

### è¯·æ±‚ç¤ºä¾‹

```http
PUT /api/v1/members/me/ HTTP/1.1
Host: your-domain.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGc...
X-Tenant-ID: 1
Content-Type: application/json

{
  "nick_name": "John Updated",
  "phone": "13900139000",
  "wechat_id": "new_wechat_id"
}
```

### å“åº”æ ¼å¼

**æˆåŠŸå“åº” (200)**: è¿”å›æ›´æ–°åçš„å®Œæ•´ç”¨æˆ·ä¿¡æ¯ï¼ˆæ ¼å¼åŒ"è·å–ç”¨æˆ·ä¿¡æ¯"ï¼‰

**é”™è¯¯å“åº” (400) - å°è¯•ä¿®æ”¹å—ä¿æŠ¤å­—æ®µ**:
```json
{
  "detail": "ä¸å…è®¸ä¿®æ”¹ username å­—æ®µ"
}
```

**é”™è¯¯å“åº” (400) - éªŒè¯å¤±è´¥**:
```json
{
  "phone": ["æ‰‹æœºå·ç æ ¼å¼ä¸æ­£ç¡®"]
}
```

---

## 3. ä¿®æ”¹å¯†ç 

### æ¥å£ä¿¡æ¯
- **URL**: `/api/v1/members/me/password/`
- **æ–¹æ³•**: `POST`
- **æƒé™**: éœ€è¦è®¤è¯ï¼Œä»…Memberç”¨æˆ·
- **Content-Type**: `application/json`

### è¯·æ±‚å‚æ•°

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ | éªŒè¯è§„åˆ™ |
|--------|------|------|------|----------|
| old_password | string | æ˜¯ | å½“å‰å¯†ç  | - |
| new_password | string | æ˜¯ | æ–°å¯†ç  | è‡³å°‘8ä¸ªå­—ç¬¦ |
| confirm_password | string | æ˜¯ | ç¡®è®¤æ–°å¯†ç  | å¿…é¡»ä¸new_passwordä¸€è‡´ |

### å¯†ç è¦æ±‚
- âœ… è‡³å°‘8ä¸ªå­—ç¬¦
- âœ… å»ºè®®åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦
- âŒ ä¸èƒ½ä¸æ—§å¯†ç ç›¸åŒ

### è¯·æ±‚ç¤ºä¾‹

```http
POST /api/v1/members/me/password/ HTTP/1.1
Host: your-domain.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGc...
X-Tenant-ID: 1
Content-Type: application/json

{
  "old_password": "OldPassword123",
  "new_password": "NewPassword456",
  "confirm_password": "NewPassword456"
}
```

### å“åº”æ ¼å¼

**æˆåŠŸå“åº” (200)**:
```json
{
  "message": "å¯†ç æ›´æ–°æˆåŠŸ"
}
```

**é”™è¯¯å“åº” (400) - æ—§å¯†ç é”™è¯¯**:
```json
{
  "old_password": ["æ—§å¯†ç ä¸æ­£ç¡®"]
}
```

**é”™è¯¯å“åº” (400) - æ–°å¯†ç ç¡®è®¤ä¸åŒ¹é…**:
```json
{
  "confirm_password": ["ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"]
}
```

**é”™è¯¯å“åº” (400) - å¯†ç è¿‡äºç®€å•**:
```json
{
  "new_password": ["å¯†ç è‡³å°‘éœ€è¦8ä¸ªå­—ç¬¦"]
}
```

---

## 4. ä¸Šä¼ å¤´åƒ

### æ¥å£ä¿¡æ¯
- **URL**: `/api/v1/members/avatar/upload/`
- **æ–¹æ³•**: `POST`
- **æƒé™**: éœ€è¦è®¤è¯ï¼Œä»…Memberä¸»è´¦å·ï¼ˆå­è´¦å·ä¸å¯ç”¨ï¼‰
- **Content-Type**: `multipart/form-data`

### è¯·æ±‚å‚æ•°

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| avatar | file | æ˜¯ | å¤´åƒå›¾ç‰‡æ–‡ä»¶ |

### æ–‡ä»¶è¦æ±‚

- **æ”¯æŒæ ¼å¼**: JPGã€JPEGã€PNGã€GIFã€WEBPã€BMP
- **æ–‡ä»¶å¤§å°**: æœ€å¤§2MB
- **å»ºè®®å°ºå¯¸**: 200x200pxæˆ–æ›´å¤§ï¼ˆæ­£æ–¹å½¢ï¼‰

### è¯·æ±‚ç¤ºä¾‹

```http
POST /api/v1/members/avatar/upload/ HTTP/1.1
Host: your-domain.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGc...
X-Tenant-ID: 1
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary

------WebKitFormBoundary
Content-Disposition: form-data; name="avatar"; filename="avatar.jpg"
Content-Type: image/jpeg

[äºŒè¿›åˆ¶å›¾ç‰‡æ•°æ®]
------WebKitFormBoundary--
```

### å“åº”æ ¼å¼

**æˆåŠŸå“åº” (200)**:
```json
{
  "detail": "å¤´åƒä¸Šä¼ æˆåŠŸ",
  "avatar": "/media/avatars/550e8400-e29b-41d4-a716-446655440000.jpg"
}
```

**è¯´æ˜**:
- è¿”å›çš„`avatar`å­—æ®µæ˜¯ç›¸å¯¹è·¯å¾„
- æ—§å¤´åƒæ–‡ä»¶ä¼šè¢«è‡ªåŠ¨åˆ é™¤
- æ˜¾ç¤ºå¤´åƒæ—¶éœ€è¦æ‹¼æ¥å®Œæ•´URL

**é”™è¯¯å“åº” (400) - æœªæä¾›æ–‡ä»¶**:
```json
{
  "detail": "æœªæä¾›å¤´åƒæ–‡ä»¶"
}
```

**é”™è¯¯å“åº” (400) - æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ**:
```json
{
  "detail": "ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹ï¼Œè¯·ä¸Šä¼ JPGã€PNGã€GIFã€WEBPæˆ–BMPæ ¼å¼çš„å›¾ç‰‡"
}
```

**é”™è¯¯å“åº” (400) - æ–‡ä»¶è¿‡å¤§**:
```json
{
  "detail": "æ–‡ä»¶å¤ªå¤§ï¼Œå¤´åƒå¤§å°ä¸èƒ½è¶…è¿‡2MB"
}
```

**é”™è¯¯å“åº” (403) - å­è´¦å·å°è¯•ä¸Šä¼ **:
```json
{
  "detail": "å­è´¦å·ä¸å…è®¸æ›´æ”¹å¤´åƒ"
}
```

---

## é›†æˆæµç¨‹

### ç”¨æˆ·èµ„æ–™é¡µé¢é›†æˆæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¡µé¢åŠ è½½         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è°ƒç”¨è·å–ç”¨æˆ·     â”‚
â”‚  ä¿¡æ¯API         â”‚
â”‚  GET /me/        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯     â”‚
â”‚  - å¤´åƒ          â”‚
â”‚  - æ˜µç§°          â”‚
â”‚  - é‚®ç®±ç­‰        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·ç¼–è¾‘ä¿¡æ¯     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è°ƒç”¨æ›´æ–°API     â”‚
â”‚  PUT /me/        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ æ˜¯å¦æˆåŠŸâ”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æˆåŠŸ   â”‚ â”‚ å¤±è´¥   â”‚
â”‚ æ›´æ–°UI â”‚ â”‚ æ˜¾ç¤ºé”™è¯¯â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¿®æ”¹å¯†ç é›†æˆæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·è¾“å…¥         â”‚
â”‚  - æ—§å¯†ç         â”‚
â”‚  - æ–°å¯†ç         â”‚
â”‚  - ç¡®è®¤å¯†ç       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯éªŒè¯         â”‚
â”‚  - å¯†ç é•¿åº¦      â”‚
â”‚  - ä¸¤æ¬¡ä¸€è‡´      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è°ƒç”¨å¯†ç ä¿®æ”¹API â”‚
â”‚  POST /me/      â”‚
â”‚  password/      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ æ˜¯å¦æˆåŠŸâ”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æˆåŠŸ   â”‚ â”‚ å¤±è´¥   â”‚
â”‚ æç¤ºé‡ç™»â”‚ â”‚ æ˜¾ç¤ºé”™è¯¯â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¤´åƒä¸Šä¼ é›†æˆæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·é€‰æ‹©å›¾ç‰‡     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯éªŒè¯         â”‚
â”‚  - æ–‡ä»¶ç±»å‹      â”‚
â”‚  - æ–‡ä»¶å¤§å°      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ„å»ºFormData    â”‚
â”‚  æ·»åŠ avatarå­—æ®µ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‘é€POSTè¯·æ±‚    â”‚
â”‚  multipart/      â”‚
â”‚  form-data       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è·å–æ–°å¤´åƒURL   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ›´æ–°UIæ˜¾ç¤º      â”‚
â”‚  æ‹¼æ¥å®Œæ•´URL     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## é”™è¯¯å¤„ç†

### é€šç”¨é”™è¯¯ç 

| HTTPçŠ¶æ€ç  | è¯´æ˜ | å¤„ç†å»ºè®® |
|-----------|------|----------|
| 200 | è¯·æ±‚æˆåŠŸ | æ­£å¸¸å¤„ç†æ•°æ® |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | æ˜¾ç¤ºå…·ä½“é”™è¯¯ä¿¡æ¯ |
| 401 | æœªè®¤è¯ | Tokenå¤±æ•ˆï¼Œè·³è½¬ç™»å½•é¡µ |
| 403 | æƒé™ä¸è¶³ | æ˜¾ç¤ºæƒé™ä¸è¶³æç¤º |
| 404 | èµ„æºä¸å­˜åœ¨ | æ˜¾ç¤ºä¸å­˜åœ¨æç¤º |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æ˜¾ç¤ºé€šç”¨é”™è¯¯æç¤º |

### é”™è¯¯å“åº”æ ¼å¼

**å­—æ®µçº§åˆ«é”™è¯¯**:
```json
{
  "field_name": ["é”™è¯¯ä¿¡æ¯1", "é”™è¯¯ä¿¡æ¯2"]
}
```

**é€šç”¨é”™è¯¯**:
```json
{
  "detail": "é”™è¯¯æè¿°ä¿¡æ¯"
}
```

---

## é›†æˆè¦ç‚¹

### 1. Tokenç®¡ç†
- ç™»å½•åä¿å­˜access_tokenå’Œrefresh_token
- æ¯æ¬¡è¯·æ±‚è‡ªåŠ¨æ·»åŠ Authorizationå¤´
- Tokenè¿‡æœŸï¼ˆ401ï¼‰æ—¶è·³è½¬ç™»å½•æˆ–åˆ·æ–°Token

### 2. ç§Ÿæˆ·IDç®¡ç†
- ç™»å½•åè·å–å¹¶ä¿å­˜ç§Ÿæˆ·ID
- æ¯æ¬¡è¯·æ±‚æ·»åŠ X-Tenant-IDå¤´
- ç¡®ä¿ä¸è·¨ç§Ÿæˆ·æ“ä½œ

### 3. å­—æ®µé™åˆ¶
- `username`å’Œ`email`ä¸å¯é€šè¿‡æ­¤æ¥å£ä¿®æ”¹
- å¦‚æœè¯·æ±‚ä¸­åŒ…å«è¿™äº›å­—æ®µï¼Œä¼šè¿”å›400é”™è¯¯
- åªæ›´æ–°å…è®¸ä¿®æ”¹çš„å­—æ®µ

### 4. å¤´åƒå¤„ç†
- ä½¿ç”¨multipart/form-dataæ ¼å¼ä¸Šä¼ 
- ä¸Šä¼ å‰éªŒè¯æ–‡ä»¶ç±»å‹å’Œå¤§å°
- è¿”å›çš„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œéœ€è¦æ‹¼æ¥å®Œæ•´URL
- å»ºè®®ä¸Šä¼ å‰å‹ç¼©å›¾ç‰‡

---

## æµ‹è¯•å»ºè®®

### ä½¿ç”¨cURLæµ‹è¯•

```bash
# 1. ç™»å½•è·å–Token
curl -X POST "https://your-domain.com/api/v1/auth/member/login/" \
  -H "X-Tenant-ID: 1" \
  -H "Content-Type: application/json" \
  -d '{"username": "test", "password": "test123"}'

# 2. è·å–ç”¨æˆ·ä¿¡æ¯
curl -X GET "https://your-domain.com/api/v1/members/me/" \
  -H "Authorization: Bearer <token>" \
  -H "X-Tenant-ID: 1"

# 3. æ›´æ–°ç”¨æˆ·ä¿¡æ¯
curl -X PUT "https://your-domain.com/api/v1/members/me/" \
  -H "Authorization: Bearer <token>" \
  -H "X-Tenant-ID: 1" \
  -H "Content-Type: application/json" \
  -d '{"nick_name": "New Name"}'

# 4. ä¿®æ”¹å¯†ç 
curl -X POST "https://your-domain.com/api/v1/members/me/password/" \
  -H "Authorization: Bearer <token>" \
  -H "X-Tenant-ID: 1" \
  -H "Content-Type: application/json" \
  -d '{
    "old_password": "old123",
    "new_password": "new123456",
    "confirm_password": "new123456"
  }'

# 5. ä¸Šä¼ å¤´åƒ
curl -X POST "https://your-domain.com/api/v1/members/avatar/upload/" \
  -H "Authorization: Bearer <token>" \
  -H "X-Tenant-ID: 1" \
  -F "avatar=@/path/to/image.jpg"
```

---

## å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆä¸èƒ½ä¿®æ”¹usernameå’Œemailï¼Ÿ
**A**: è¿™äº›æ˜¯ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ï¼Œä¿®æ”¹å¯èƒ½å¯¼è‡´ç³»ç»Ÿé—®é¢˜ã€‚å¦‚éœ€ä¿®æ”¹ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ã€‚

### Q2: ä¿®æ”¹å¯†ç åéœ€è¦é‡æ–°ç™»å½•å—ï¼Ÿ
**A**: ä¸å¼ºåˆ¶ï¼Œä½†å»ºè®®æç¤ºç”¨æˆ·é‡æ–°ç™»å½•ä»¥ç¡®ä¿å®‰å…¨ã€‚

### Q3: å¤´åƒURLå¦‚ä½•ä½¿ç”¨ï¼Ÿ
**A**: åç«¯è¿”å›ç›¸å¯¹è·¯å¾„ï¼Œå‰ç«¯éœ€è¦æ‹¼æ¥ï¼š`BASE_URL + avatar_path`

### Q4: å­è´¦å·èƒ½å¦ä½¿ç”¨è¿™äº›APIï¼Ÿ
**A**: å­è´¦å·å¯ä»¥è·å–ä¿¡æ¯å’Œä¿®æ”¹å¯†ç ï¼Œä½†ä¸èƒ½ä¸Šä¼ å¤´åƒã€‚

### Q5: å¦‚ä½•å¤„ç†Tokenè¿‡æœŸï¼Ÿ
**A**: ç›‘å¬401é”™è¯¯ï¼Œæ¸…é™¤æœ¬åœ°Tokenï¼Œè·³è½¬ç™»å½•é¡µã€‚

---

## æ•°æ®ç±»å‹å®šä¹‰

### ç”¨æˆ·ä¿¡æ¯å¯¹è±¡

```
MemberInfo {
  id: Integer
  username: String
  email: String
  phone: String
  nick_name: String
  avatar: String
  wechat_id: String
  status: String (æšä¸¾: active/suspended/inactive)
  tenant: Integer
  tenant_name: String
  is_sub_account: Boolean
  parent: Integer | null
  parent_username: String | null
  last_login: String (ISO 8601 DateTime)
  date_joined: String (ISO 8601 DateTime)
}
```

### æ›´æ–°è¯·æ±‚å¯¹è±¡

```
UpdateMemberRequest {
  nick_name: String (å¯é€‰ï¼Œæœ€å¤§30å­—ç¬¦)
  phone: String (å¯é€‰ï¼Œ11ä½æ•°å­—)
  wechat_id: String (å¯é€‰ï¼Œæœ€å¤§32å­—ç¬¦)
}
```

### å¯†ç ä¿®æ”¹è¯·æ±‚å¯¹è±¡

```
PasswordUpdateRequest {
  old_password: String (å¿…å¡«)
  new_password: String (å¿…å¡«ï¼Œè‡³å°‘8å­—ç¬¦)
  confirm_password: String (å¿…å¡«)
}
```

---

## æ›´æ–°æ—¥å¿—

| ç‰ˆæœ¬ | æ—¥æœŸ | è¯´æ˜ |
|------|------|------|
| 2.0 | 2025-10-31 | ç§»é™¤å‰ç«¯ä»£ç ï¼Œæ”¹ä¸ºé€šç”¨é›†æˆè¯´æ˜ |
| 1.0 | 2025-10-31 | åˆå§‹ç‰ˆæœ¬ |

---

**æŠ€æœ¯æ”¯æŒ**: å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»åç«¯å›¢é˜Ÿã€‚
