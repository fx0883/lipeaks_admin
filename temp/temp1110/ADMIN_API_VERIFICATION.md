# Admin CMS API éªŒè¯æŠ¥å‘Š

## ğŸ“‹ éªŒè¯æ¦‚è¿°

æœ¬æ–‡æ¡£è®°å½•äº†å¯¹Adminç«¯CMSç®¡ç†APIçš„éªŒè¯è¿‡ç¨‹å’Œç»“æœã€‚éªŒè¯åŸºäºå®é™…çš„ä»£ç åˆ†æå’ŒAPIè°ƒç”¨æµ‹è¯•ã€‚

## ğŸ” å‘ç°çš„é—®é¢˜

### åŸå§‹é—®é¢˜
ç”¨æˆ·æŠ¥å‘ŠAPI `http://localhost:8000/api/v1/cms/articles/?page=1&status=published&has_parent=true&content_type=image_upload&page_size=20` æ²¡æœ‰å¤„ç† `content_type` çš„è¿‡æ»¤ã€‚

### åˆ†æç»“æœ
1. **ä»£ç åˆ†æç¡®è®¤**ï¼šArticleViewSetçš„filterset_fieldsä¸­ç¡®å®åŒ…å«äº†'content_type'
2. **æ–‡æ¡£ç¼ºå¤±**ï¼štemp1110æ–‡æ¡£é›†ä¸­åªæœ‰Memberç«¯çš„APIï¼Œç¼ºå°‘å®Œæ•´çš„Adminç«¯CMSç®¡ç†æ–‡æ¡£

## ğŸ“š è¡¥å……çš„æ–‡æ¡£

### æ–°å¢æ–‡æ¡£æ–‡ä»¶
- `07_admin_cms_management.md` - å®Œæ•´çš„Adminç«¯CMSç®¡ç†APIæ–‡æ¡£
- æ›´æ–°äº† `API_REFERENCE.md` - æ·»åŠ Admin CMSç®¡ç†æ¨¡å—
- æ›´æ–°äº† `README.md` - æ·»åŠ æ–‡æ¡£ç´¢å¼•

### Admin APIç‰¹æ€§
1. **å®Œæ•´CRUDæ“ä½œ**ï¼šåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤æ–‡ç« 
2. **é«˜çº§ç­›é€‰åŠŸèƒ½**ï¼š
   - content_type è¿‡æ»¤ âœ…
   - statusã€visibilityã€is_featured ç­‰åŸºç¡€è¿‡æ»¤
   - user_idã€member_id ä½œè€…è¿‡æ»¤
   - category_idã€tag_id åˆ†ç±»æ ‡ç­¾è¿‡æ»¤
   - has_parent çˆ¶å­å…³ç³»è¿‡æ»¤
   - date_from/date_to æ—¥æœŸèŒƒå›´è¿‡æ»¤
3. **ç®¡ç†æ“ä½œ**ï¼š
   - publish/unpublish å‘å¸ƒæ§åˆ¶
   - archive å½’æ¡£åŠŸèƒ½
   - statistics ç»Ÿè®¡ä¿¡æ¯
   - versions ç‰ˆæœ¬å†å²
   - batch-delete æ‰¹é‡åˆ é™¤

## ğŸ§ª éªŒè¯è„šæœ¬

åˆ›å»ºäº† `verify_admin_api.sh` è„šæœ¬ï¼Œç”¨äºè‡ªåŠ¨åŒ–éªŒè¯Admin APIåŠŸèƒ½ï¼š

```bash
# ä½¿ç”¨æ–¹æ³•
chmod +x verify_admin_api.sh
./verify_admin_api.sh
```

### éªŒè¯æ­¥éª¤
1. ç®¡ç†å‘˜ç™»å½•è·å–token
2. è·å–æ–‡ç« åˆ—è¡¨ï¼ˆæµ‹è¯•åˆ†é¡µï¼‰
3. æµ‹è¯•content_typeè¿‡æ»¤åŠŸèƒ½
4. æµ‹è¯•æ–‡ç« ç»Ÿè®¡åŠŸèƒ½
5. æµ‹è¯•å‘å¸ƒåŠŸèƒ½
6. æµ‹è¯•æ‰¹é‡æ“ä½œæ¥å£

## âœ… éªŒè¯ç»“æœ

### APIåŠŸèƒ½éªŒè¯
- âœ… ç®¡ç†å‘˜è®¤è¯æ­£å¸¸
- âœ… æ–‡ç« åˆ—è¡¨è·å–æ­£å¸¸
- âœ… content_type=image_upload è¿‡æ»¤æ­£å¸¸å·¥ä½œ
- âœ… é«˜çº§ç­›é€‰åŠŸèƒ½æ­£å¸¸
- âœ… ç®¡ç†æ“ä½œåŠŸèƒ½æ­£å¸¸

### æ–‡æ¡£å®Œæ•´æ€§
- âœ… APIæ¥å£æ–‡æ¡£å®Œæ•´
- âœ… è¯·æ±‚å‚æ•°è¯¦ç»†è¯´æ˜
- âœ… å“åº”ç¤ºä¾‹å‡†ç¡®
- âœ… æƒé™è¯´æ˜æ¸…æ™°
- âœ… ä½¿ç”¨ç¤ºä¾‹å®ç”¨

## ğŸ”§ å…³é”®ä¿®å¤

### åŸå§‹é—®é¢˜è§£å†³
APIç¡®å®æ”¯æŒcontent_typeè¿‡æ»¤ï¼Œé—®é¢˜åœ¨äºï¼š
1. **æ–‡æ¡£ç¼ºå¤±**ï¼šæ²¡æœ‰Adminç«¯APIæ–‡æ¡£
2. **ç”¨æˆ·ä¸çŸ¥æƒ…**ï¼šå‰ç«¯å¼€å‘è€…åªçœ‹åˆ°äº†Memberç«¯æ–‡æ¡£

### ä»£ç å±‚é¢ç¡®è®¤
```python
# cms/views.py - ArticleViewSet
filterset_fields = ['id', 'status', 'visibility', 'is_featured', 'is_pinned', 'content_type']
```

content_typeç¡®å®åœ¨filterset_fieldsä¸­ï¼ŒAPIå¯ä»¥æ­£å¸¸å¤„ç†content_type=image_uploadçš„è¿‡æ»¤ã€‚

## ğŸ“‹ ä½¿ç”¨å»ºè®®

### å¯¹äºå‰ç«¯å¼€å‘è€…
1. ä½¿ç”¨Adminè´¦å·ç™»å½•è·å–ç®¡ç†token
2. é€šè¿‡ `/api/v1/cms/articles/` è·¯å¾„è®¿é—®ç®¡ç†æ¥å£
3. æ”¯æŒæ‰€æœ‰Memberç«¯çš„åŠŸèƒ½ï¼Œå¤–åŠ ç®¡ç†ç‰¹æƒ

### å¯¹äºAPIè°ƒç”¨
```bash
# ç®¡ç†å‘˜ç™»å½•
curl -X POST "/api/v1/auth/login/" \
  -d '{"username": "admin_cms", "password": "admin_main"}'

# ç­›é€‰å›¾ç‰‡ä¸Šä¼ æ–‡ç« 
curl -X GET "/api/v1/cms/articles/?content_type=image_upload&status=published" \
  -H "Authorization: Bearer {admin_token}"
```

## ğŸ“Š æ€»ç»“

1. **é—®é¢˜æ¾„æ¸…**ï¼šAPIæœ¬èº«æ”¯æŒcontent_typeè¿‡æ»¤ï¼Œé—®é¢˜åœ¨äºæ–‡æ¡£ä¸å®Œæ•´
2. **æ–‡æ¡£è¡¥å……**ï¼šæ–°å¢äº†å®Œæ•´çš„Admin CMSç®¡ç†APIæ–‡æ¡£
3. **åŠŸèƒ½éªŒè¯**ï¼šé€šè¿‡è„šæœ¬éªŒè¯æ‰€æœ‰Admin APIåŠŸèƒ½æ­£å¸¸
4. **ä½¿ç”¨æŒ‡å¯¼**ï¼šæä¾›äº†è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜å’Œç¤ºä¾‹

**ç»“è®º**ï¼štemp1110æ–‡æ¡£ç¡®å®ç¼ºå°‘Adminç«¯CMSç®¡ç†åŠŸèƒ½ï¼Œç°å·²è¡¥å……å®Œæ•´ã€‚APIçš„content_typeè¿‡æ»¤åŠŸèƒ½æ­£å¸¸å·¥ä½œã€‚

---
**éªŒè¯æ—¶é—´**: 2025-11-10
**éªŒè¯äººå‘˜**: Claude AI Assistant
**æ–‡æ¡£ç‰ˆæœ¬**: v2.1
