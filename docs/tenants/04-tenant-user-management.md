# 租户用户管理

本文档介绍租户管理模块中与用户管理相关的功能，主要包括获取租户用户列表。

## 1. 获取租户用户列表

### 接口信息

- **URL**: `/api/v1/tenants/{id}/users/`
- **方法**: GET
- **权限要求**: 超级管理员或该租户的管理员

### 路径参数

| 参数名 | 类型 | 必填 | 描述 |
|-------|------|------|------|
| id | integer | 是 | 租户ID |

### 查询参数

| 参数名 | 类型 | 必填 | 描述 |
|-------|------|------|------|
| search | string | 否 | 搜索关键词，支持用户名、邮箱和昵称搜索 |
| is_admin | boolean | 否 | 是否为管理员 (true/false) |
| status | string | 否 | 用户状态筛选 |
| page | integer | 否 | 页码，默认为1 |
| page_size | integer | 否 | 每页条数，默认为10 |

### 响应示例

```json
{
  "success": true,
  "code": 2000,
  "message": "获取成功",
  "data": {
    "count": 2,
    "next": null,
    "previous": null,
    "results": [
      {
        "id": 2,
        "username": "tenant_admin",
        "email": "tenant_admin@example.com",
        "nick_name": "租户管理员",
        "is_active": true,
        "is_admin": true,
        "status": "active",
        "date_joined": "2025-04-21T10:00:00Z"
      },
      {
        "id": 3,
        "username": "tenant_user",
        "email": "tenant_user@example.com",
        "nick_name": "租户用户",
        "is_active": true,
        "is_admin": false,
        "status": "active",
        "date_joined": "2025-04-21T11:00:00Z"
      }
    ]
  }
}
```

## 2. 用户管理与租户系统的关系

在多租户系统中，用户管理与租户系统紧密相关，但它们通常是分开的API端点：

1. **租户用户列表API**：`/api/v1/tenants/{id}/users/` - 获取特定租户下的所有用户
2. **用户管理API**：`/api/v1/users/` - 用户的创建、更新、删除等操作

用户创建、更新和删除操作通常通过用户管理模块的API进行，而不是租户管理模块。但在创建用户时，需要指定用户所属的租户。

## 3. 租户配额与用户创建

在创建用户时，系统会检查租户的用户配额是否已满。如果已达到配额限制，创建用户的请求会被拒绝。前端应该在用户创建界面中显示当前租户的用户配额使用情况，并在接近或达到配额限制时提醒用户。

## 4. 用户管理界面设计建议

### 用户列表组件

用户列表应包含以下元素：

- 顶部过滤器：
  - 搜索框：用于按用户名、邮箱或昵称搜索
  - 角色筛选下拉框：筛选管理员或普通用户
  - 状态筛选下拉框：筛选活跃或未激活用户

- 用户表格：
  - ID列
  - 用户名列
  - 邮箱列
  - 昵称列
  - 角色列（管理员/普通用户）
  - 状态列（活跃/未激活）
  - 注册时间列
  - 操作列（查看、编辑按钮）

- 分页控件：
  - 上一页/下一页按钮
  - 页码显示
  - 每页显示条数选择

## 5. 用户与租户关系管理

在多租户系统中，用户通常只属于一个租户，但在某些高级场景下，用户可能需要访问多个租户。这种情况下，系统可能需要实现以下功能：

1. **用户租户切换**：允许用户在不同租户之间切换
2. **跨租户权限管理**：管理用户在不同租户中的权限

这些功能通常需要额外的API支持，不在基本的租户管理模块中。如果需要这些功能，应该与后端开发人员协商实现方案。

## 下一步

请查看[租户API完整参考](./05-tenant-api-reference.md)，了解租户管理模块的所有API端点详情。 