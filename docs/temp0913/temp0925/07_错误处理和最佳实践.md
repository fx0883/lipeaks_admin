# é”™è¯¯å¤„ç†å’Œæœ€ä½³å®è·µ - è¯¦ç»†æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [é”™è¯¯å¤„ç†æ¦‚è¿°](#é”™è¯¯å¤„ç†æ¦‚è¿°)
- [å¸¸è§é”™è¯¯ç±»å‹](#å¸¸è§é”™è¯¯ç±»å‹)
- [APIæœ€ä½³å®è·µ](#apiæœ€ä½³å®è·µ)
- [æ€§èƒ½ä¼˜åŒ–æŒ‡å—](#æ€§èƒ½ä¼˜åŒ–æŒ‡å—)
- [å®‰å…¨æœ€ä½³å®è·µ](#å®‰å…¨æœ€ä½³å®è·µ)
- [ç›‘æ§å’Œè°ƒè¯•](#ç›‘æ§å’Œè°ƒè¯•)
- [éƒ¨ç½²å’Œè¿ç»´](#éƒ¨ç½²å’Œè¿ç»´)

---

## âš ï¸ é”™è¯¯å¤„ç†æ¦‚è¿°

### é”™è¯¯å“åº”æ ‡å‡†æ ¼å¼

```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "ç”¨æˆ·å‹å¥½çš„é”™è¯¯æè¿°",
    "details": {
      "field_errors": {},
      "validation_errors": [],
      "additional_info": {}
    },
    "request_id": "550e8400-e29b-41d4-a716-446655440000",
    "timestamp": "2025-09-25T16:00:00Z",
    "documentation_url": "https://docs.example.com/errors/ERROR_CODE"
  }
}
```

### HTTPçŠ¶æ€ç è§„èŒƒ

| çŠ¶æ€ç  | ç±»å‹ | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|--------|------|------|----------|
| `200` | æˆåŠŸ | è¯·æ±‚æˆåŠŸ | æ­£å¸¸æ“ä½œå®Œæˆ |
| `201` | æˆåŠŸ | åˆ›å»ºæˆåŠŸ | èµ„æºåˆ›å»ºå®Œæˆ |
| `400` | å®¢æˆ·ç«¯é”™è¯¯ | è¯·æ±‚å‚æ•°é”™è¯¯ | æ•°æ®éªŒè¯å¤±è´¥ |
| `401` | å®¢æˆ·ç«¯é”™è¯¯ | æœªæˆæƒ | Tokenæ— æ•ˆæˆ–è¿‡æœŸ |
| `403` | å®¢æˆ·ç«¯é”™è¯¯ | ç¦æ­¢è®¿é—® | æƒé™ä¸è¶³ |
| `404` | å®¢æˆ·ç«¯é”™è¯¯ | èµ„æºä¸å­˜åœ¨ | æ‰¾ä¸åˆ°æŒ‡å®šèµ„æº |
| `409` | å®¢æˆ·ç«¯é”™è¯¯ | å†²çª | èµ„æºå†²çªæˆ–ä¸šåŠ¡è§„åˆ™å†²çª |
| `422` | å®¢æˆ·ç«¯é”™è¯¯ | æ•°æ®éªŒè¯å¤±è´¥ | æ•°æ®æ ¼å¼æ­£ç¡®ä½†ä¸šåŠ¡éªŒè¯å¤±è´¥ |
| `429` | å®¢æˆ·ç«¯é”™è¯¯ | è¯·æ±‚è¿‡å¤š | è§¦å‘é™æµ |
| `500` | æœåŠ¡å™¨é”™è¯¯ | å†…éƒ¨é”™è¯¯ | ç³»ç»Ÿå¼‚å¸¸ |
| `502` | æœåŠ¡å™¨é”™è¯¯ | ç½‘å…³é”™è¯¯ | ä¸Šæ¸¸æœåŠ¡ä¸å¯ç”¨ |
| `503` | æœåŠ¡å™¨é”™è¯¯ | æœåŠ¡ä¸å¯ç”¨ | ç³»ç»Ÿç»´æŠ¤æˆ–è¿‡è½½ |

---

## ğŸš¨ å¸¸è§é”™è¯¯ç±»å‹

### 1. è®¤è¯å’Œæˆæƒé”™è¯¯

#### 401 - Tokenæ— æ•ˆæˆ–è¿‡æœŸ

```json
{
  "success": false,
  "error": {
    "code": "INVALID_TOKEN",
    "message": "è®¤è¯ä»¤ç‰Œæ— æ•ˆæˆ–å·²è¿‡æœŸ",
    "details": {
      "token_expired": true,
      "expiry_time": "2025-09-25T15:00:00Z",
      "refresh_token_available": true
    }
  }
}
```

**è§£å†³æ–¹æ¡ˆï¼š**
```javascript
// å®¢æˆ·ç«¯è‡ªåŠ¨åˆ·æ–°Token
const refreshToken = async () => {
  try {
    const response = await fetch('/api/auth/refresh/', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        refresh_token: localStorage.getItem('refresh_token')
      })
    });
    
    if (response.ok) {
      const data = await response.json();
      localStorage.setItem('access_token', data.access_token);
      return data.access_token;
    }
  } catch (error) {
    // é‡å®šå‘åˆ°ç™»å½•é¡µé¢
    window.location.href = '/login';
  }
};
```

#### 403 - æƒé™ä¸è¶³

```json
{
  "success": false,
  "error": {
    "code": "INSUFFICIENT_PERMISSIONS",
    "message": "æƒé™ä¸è¶³ï¼Œæ— æ³•æ‰§è¡Œæ­¤æ“ä½œ",
    "details": {
      "required_permissions": ["can_manage_points"],
      "user_permissions": ["can_view_points"],
      "missing_permissions": ["can_manage_points"]
    }
  }
}
```

**è§£å†³æ–¹æ¡ˆï¼š**
- æ£€æŸ¥ç”¨æˆ·æƒé™ç­‰çº§
- è”ç³»ç®¡ç†å‘˜ç”³è¯·æƒé™
- ä½¿ç”¨æœ‰æƒé™çš„è´¦æˆ·æ“ä½œ

### 2. ä¸šåŠ¡é€»è¾‘é”™è¯¯

#### ç§¯åˆ†ä½™é¢ä¸è¶³

```json
{
  "success": false,
  "error": {
    "code": "INSUFFICIENT_POINTS",
    "message": "ç§¯åˆ†ä½™é¢ä¸è¶³",
    "details": {
      "required_points": 1000,
      "available_points": 800,
      "shortage": 200,
      "suggestions": [
        "å®Œæˆæ—¥å¸¸ä»»åŠ¡è·å¾—ç§¯åˆ†",
        "é‚€è¯·æœ‹å‹æ³¨å†Œè·å¾—å¥–åŠ±",
        "è´­ä¹°ç§¯åˆ†åŒ…"
      ]
    }
  }
}
```

**è§£å†³æ–¹æ¡ˆï¼š**
```python
def handle_insufficient_points(error_data):
    """å¤„ç†ç§¯åˆ†ä¸è¶³é”™è¯¯"""
    details = error_data['error']['details']
    shortage = details['shortage']
    
    # æä¾›è§£å†³æ–¹æ¡ˆ
    suggestions = [
        f"è¿˜éœ€è¦ {shortage} ç§¯åˆ†",
        "å®Œæˆä»»åŠ¡å¯å¿«é€Ÿè·å¾—ç§¯åˆ†",
        "é‚€è¯·å¥½å‹æ³¨å†Œè·å¾—200ç§¯åˆ†å¥–åŠ±"
    ]
    
    return {
        'show_modal': True,
        'title': 'ç§¯åˆ†ä¸è¶³',
        'message': f"å½“å‰ç§¯åˆ†: {details['available_points']}, éœ€è¦: {details['required_points']}",
        'suggestions': suggestions,
        'actions': [
            {'label': 'å»èµšç§¯åˆ†', 'action': 'navigate_to_tasks'},
            {'label': 'é‚€è¯·å¥½å‹', 'action': 'open_referral'},
            {'label': 'è´­ä¹°ç§¯åˆ†', 'action': 'open_store'}
        ]
    }
```

#### VIPæƒé™å†²çª

```json
{
  "success": false,
  "error": {
    "code": "VIP_TAG_CONFLICT",
    "message": "VIPæ ‡ç­¾å†²çªï¼Œç”¨æˆ·å·²æ‹¥æœ‰åŒç±»å‹VIP",
    "details": {
      "existing_tag": {
        "id": 5,
        "tag_name": "VIPé“¶ç‰Œ",
        "expires_at": "2025-12-31T23:59:59Z"
      },
      "requested_tag": {
        "id": 3,
        "tag_name": "VIPé‡‘ç‰Œ"
      },
      "resolution_options": [
        "upgrade_existing",
        "extend_existing", 
        "replace_existing"
      ]
    }
  }
}
```

### 3. æ•°æ®éªŒè¯é”™è¯¯

#### 422 - æ•°æ®éªŒè¯å¤±è´¥

```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "è¯·æ±‚æ•°æ®éªŒè¯å¤±è´¥",
    "details": {
      "field_errors": {
        "points_amount": [
          "ç§¯åˆ†æ•°é‡å¿…é¡»å¤§äº0",
          "ç§¯åˆ†æ•°é‡ä¸èƒ½è¶…è¿‡10000"
        ],
        "expires_at": [
          "è¿‡æœŸæ—¶é—´ä¸èƒ½æ—©äºå½“å‰æ—¶é—´"
        ],
        "category": [
          "æ— æ•ˆçš„ç§¯åˆ†ç±»åˆ«"
        ]
      },
      "valid_categories": ["login", "license", "referral", "manual"],
      "field_constraints": {
        "points_amount": {
          "min": 1,
          "max": 10000,
          "type": "integer"
        }
      }
    }
  }
}
```

**å®¢æˆ·ç«¯éªŒè¯ç¤ºä¾‹ï¼š**
```javascript
class PointsValidator {
  static validateEarnPoints(data) {
    const errors = {};
    
    // éªŒè¯ç§¯åˆ†æ•°é‡
    if (!data.points_amount || data.points_amount <= 0) {
      errors.points_amount = ['ç§¯åˆ†æ•°é‡å¿…é¡»å¤§äº0'];
    } else if (data.points_amount > 10000) {
      errors.points_amount = ['å•æ¬¡ç§¯åˆ†æ•°é‡ä¸èƒ½è¶…è¿‡10000'];
    }
    
    // éªŒè¯åˆ†ç±»
    const validCategories = ['login', 'license', 'referral', 'manual'];
    if (!data.category || !validCategories.includes(data.category)) {
      errors.category = ['è¯·é€‰æ‹©æœ‰æ•ˆçš„ç§¯åˆ†ç±»åˆ«'];
    }
    
    // éªŒè¯è¿‡æœŸæ—¶é—´
    if (data.expires_at && new Date(data.expires_at) < new Date()) {
      errors.expires_at = ['è¿‡æœŸæ—¶é—´ä¸èƒ½æ—©äºå½“å‰æ—¶é—´'];
    }
    
    return {
      isValid: Object.keys(errors).length === 0,
      errors: errors
    };
  }
}
```

### 4. ç³»ç»Ÿçº§é”™è¯¯

#### 500 - æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

```json
{
  "success": false,
  "error": {
    "code": "INTERNAL_SERVER_ERROR",
    "message": "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•",
    "details": {
      "error_id": "ERR_20250925_160001",
      "support_contact": "support@example.com",
      "retry_after": 30,
      "status_page": "https://status.example.com"
    }
  }
}
```

#### 503 - æœåŠ¡ä¸å¯ç”¨

```json
{
  "success": false,
  "error": {
    "code": "SERVICE_UNAVAILABLE",
    "message": "æœåŠ¡ä¸´æ—¶ä¸å¯ç”¨ï¼Œæ­£åœ¨ç»´æŠ¤ä¸­",
    "details": {
      "maintenance_window": {
        "start": "2025-09-25T16:00:00Z",
        "end": "2025-09-25T18:00:00Z"
      },
      "estimated_downtime": "2 hours",
      "alternative_endpoints": []
    }
  }
}
```

---

## ğŸ¯ APIæœ€ä½³å®è·µ

### 1. è¯·æ±‚è®¾è®¡æœ€ä½³å®è·µ

#### ä½¿ç”¨å¹‚ç­‰æ€§æ“ä½œ

```python
# å¥½çš„åšæ³•ï¼šå¹‚ç­‰çš„ç§¯åˆ†æ“ä½œ
def earn_points_idempotent(user_id, operation_id, points_data):
    """å¹‚ç­‰çš„ç§¯åˆ†æ“ä½œ"""
    
    # æ£€æŸ¥æ“ä½œæ˜¯å¦å·²æ‰§è¡Œ
    existing_operation = PointsOperation.objects.filter(
        user_id=user_id,
        operation_id=operation_id
    ).first()
    
    if existing_operation:
        return existing_operation.result
    
    # æ‰§è¡Œæ“ä½œ
    with transaction.atomic():
        result = execute_points_operation(user_id, points_data)
        
        # è®°å½•æ“ä½œ
        PointsOperation.objects.create(
            user_id=user_id,
            operation_id=operation_id,
            result=result
        )
        
        return result

# å®¢æˆ·ç«¯ä½¿ç”¨å¹‚ç­‰æ€§
const earnPoints = async (pointsData) => {
  const operationId = generateUUID();
  
  const response = await fetch('/api/v1/points/earn/', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Idempotency-Key': operationId
    },
    body: JSON.stringify({
      operation_id: operationId,
      ...pointsData
    })
  });
  
  return response.json();
};
```

#### æ‰¹é‡æ“ä½œä¼˜åŒ–

```javascript
// å¥½çš„åšæ³•ï¼šæ‰¹é‡æ“ä½œ
const batchEarnPoints = async (userPointsData) => {
  const response = await fetch('/api/v1/points/batch-earn/', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${token}`
    },
    body: JSON.stringify({
      operations: userPointsData.map(data => ({
        user_id: data.userId,
        points_amount: data.points,
        category: data.category,
        reason: data.reason
      }))
    })
  });
  
  return response.json();
};

// é¿å…çš„åšæ³•ï¼šå¾ªç¯è°ƒç”¨å•ä¸ªAPI
const inefficientEarnPoints = async (userPointsData) => {
  const results = [];
  
  // è¿™ä¼šäº§ç”Ÿè¿‡å¤šçš„HTTPè¯·æ±‚
  for (const data of userPointsData) {
    const result = await earnSinglePoints(data);
    results.push(result);
  }
  
  return results;
};
```

### 2. é”™è¯¯å¤„ç†æœ€ä½³å®è·µ

#### ç»Ÿä¸€é”™è¯¯å¤„ç†å™¨

```javascript
class APIClient {
  constructor(baseURL, token) {
    this.baseURL = baseURL;
    this.token = token;
  }
  
  async request(endpoint, options = {}) {
    const url = `${this.baseURL}${endpoint}`;
    const config = {
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${this.token}`,
        ...options.headers
      },
      ...options
    };
    
    try {
      const response = await fetch(url, config);
      const data = await response.json();
      
      if (!response.ok) {
        throw new APIError(data.error, response.status);
      }
      
      return data;
    } catch (error) {
      if (error instanceof APIError) {
        throw error;
      }
      
      // ç½‘ç»œé”™è¯¯æˆ–å…¶ä»–å¼‚å¸¸
      throw new APIError({
        code: 'NETWORK_ERROR',
        message: 'ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œçŠ¶æ€'
      }, 0);
    }
  }
}

class APIError extends Error {
  constructor(errorData, statusCode) {
    super(errorData.message);
    this.code = errorData.code;
    this.details = errorData.details;
    this.statusCode = statusCode;
  }
}

// å…¨å±€é”™è¯¯å¤„ç†
const handleAPIError = (error) => {
  switch (error.code) {
    case 'INVALID_TOKEN':
      return refreshTokenAndRetry();
    
    case 'INSUFFICIENT_POINTS':
      return showPointsInsufficientModal(error.details);
    
    case 'VALIDATION_ERROR':
      return showValidationErrors(error.details.field_errors);
    
    case 'RATE_LIMIT_EXCEEDED':
      return showRateLimitMessage(error.details.retry_after);
    
    default:
      return showGenericError(error.message);
  }
};
```

#### é‡è¯•æœºåˆ¶

```javascript
class RetryableRequest {
  constructor(maxRetries = 3, backoffMultiplier = 2) {
    this.maxRetries = maxRetries;
    this.backoffMultiplier = backoffMultiplier;
  }
  
  async executeWithRetry(requestFunc, retryableErrorCodes = ['NETWORK_ERROR', 'INTERNAL_SERVER_ERROR']) {
    let lastError;
    
    for (let attempt = 0; attempt <= this.maxRetries; attempt++) {
      try {
        return await requestFunc();
      } catch (error) {
        lastError = error;
        
        // ä¸å¯é‡è¯•çš„é”™è¯¯ç›´æ¥æŠ›å‡º
        if (!retryableErrorCodes.includes(error.code)) {
          throw error;
        }
        
        // æœ€åä¸€æ¬¡å°è¯•å¤±è´¥
        if (attempt === this.maxRetries) {
          throw error;
        }
        
        // æŒ‡æ•°é€€é¿å»¶è¿Ÿ
        const delay = Math.pow(this.backoffMultiplier, attempt) * 1000;
        await this.sleep(delay);
      }
    }
    
    throw lastError;
  }
  
  sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const retryableRequest = new RetryableRequest(3, 2);

const earnPointsWithRetry = async (pointsData) => {
  return await retryableRequest.executeWithRetry(
    () => apiClient.request('/points/earn/', {
      method: 'POST',
      body: JSON.stringify(pointsData)
    })
  );
};
```

### 3. ç¼“å­˜ç­–ç•¥

#### å®¢æˆ·ç«¯ç¼“å­˜

```javascript
class CachedAPIClient {
  constructor(baseURL, token) {
    this.apiClient = new APIClient(baseURL, token);
    this.cache = new Map();
    this.cacheExpiry = new Map();
  }
  
  async getCached(key, fetchFunc, ttlSeconds = 300) {
    const now = Date.now();
    const expiry = this.cacheExpiry.get(key);
    
    // ç¼“å­˜å‘½ä¸­ä¸”æœªè¿‡æœŸ
    if (this.cache.has(key) && expiry && now < expiry) {
      return this.cache.get(key);
    }
    
    // è·å–æ–°æ•°æ®
    const data = await fetchFunc();
    
    // ç¼“å­˜æ•°æ®
    this.cache.set(key, data);
    this.cacheExpiry.set(key, now + (ttlSeconds * 1000));
    
    return data;
  }
  
  // ç”¨æˆ·ç­‰çº§æ•°æ®ç¼“å­˜ï¼ˆå˜åŒ–é¢‘ç‡ä½ï¼‰
  async getUserLevels() {
    return this.getCached('user_levels', 
      () => this.apiClient.request('/points/user-levels/'),
      3600 // 1å°æ—¶ç¼“å­˜
    );
  }
  
  // ç”¨æˆ·ç§¯åˆ†æ•°æ®ç¼“å­˜ï¼ˆå˜åŒ–é¢‘ç‡ä¸­ç­‰ï¼‰
  async getUserProfile(userId) {
    return this.getCached(`user_profile_${userId}`,
      () => this.apiClient.request(`/points/profiles/${userId}/`),
      300 // 5åˆ†é’Ÿç¼“å­˜
    );
  }
  
  // æ¸…é™¤ç‰¹å®šç¼“å­˜
  invalidateCache(key) {
    this.cache.delete(key);
    this.cacheExpiry.delete(key);
  }
}
```

---

## âš¡ æ€§èƒ½ä¼˜åŒ–æŒ‡å—

### 1. æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–

#### ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–

```python
# Djangoæ¨¡å‹ç´¢å¼•ä¼˜åŒ–
class TenantUserPoints(BaseModel):
    class Meta:
        indexes = [
            # å¤åˆç´¢å¼•ï¼šç§Ÿæˆ· + ç”¨æˆ· + åˆ›å»ºæ—¶é—´
            models.Index(
                fields=['tenant', 'member', '-created_at'],
                name='idx_tenant_member_created'
            ),
            # è¿‡æœŸæ—¶é—´ç´¢å¼•ï¼ˆéƒ¨åˆ†ç´¢å¼•ï¼‰
            models.Index(
                fields=['expires_at'],
                name='idx_expires_at',
                condition=models.Q(expires_at__isnull=False, status='active')
            ),
            # ç§¯åˆ†ç±»å‹ç´¢å¼•
            models.Index(
                fields=['tenant', 'point_type', 'category'],
                name='idx_tenant_type_category'
            )
        ]

# æŸ¥è¯¢ä¼˜åŒ–ç¤ºä¾‹
def get_user_points_optimized(tenant_id, user_id, limit=20):
    """ä¼˜åŒ–çš„ç”¨æˆ·ç§¯åˆ†æŸ¥è¯¢"""
    
    return TenantUserPoints.objects.filter(
        tenant_id=tenant_id,
        member_id=user_id
    ).select_related(
        'tenant_user_profile',
        'member'
    ).prefetch_related(
        'tenant_user_profile__current_level'
    ).order_by('-created_at')[:limit]
```

#### æŸ¥è¯¢é›†ä¼˜åŒ–

```python
# å¥½çš„åšæ³•ï¼šä½¿ç”¨select_relatedå’Œprefetch_related
def get_user_profiles_optimized():
    return TenantUserProfile.objects.select_related(
        'member',
        'tenant', 
        'current_level'
    ).prefetch_related(
        'user_tags__tag',
        'points_records'
    ).filter(
        is_points_enabled=True
    )

# é¿å…çš„åšæ³•ï¼šN+1æŸ¥è¯¢é—®é¢˜
def get_user_profiles_inefficient():
    profiles = TenantUserProfile.objects.all()
    
    for profile in profiles:
        # æ¯æ¬¡å¾ªç¯éƒ½ä¼šäº§ç”Ÿæ•°æ®åº“æŸ¥è¯¢
        print(profile.member.username)  # N+1 query
        print(profile.current_level.level_name)  # N+1 query
        
        # è·å–ç”¨æˆ·æ ‡ç­¾
        for tag in profile.user_tags.all():  # N+1 query
            print(tag.tag.tag_name)
```

### 2. APIå“åº”ä¼˜åŒ–

#### å­—æ®µé€‰æ‹©

```python
# Django REST Framework å­—æ®µé€‰æ‹©
class TenantUserProfileViewSet(viewsets.ModelViewSet):
    
    def get_serializer_context(self):
        context = super().get_serializer_context()
        
        # æ”¯æŒå­—æ®µé€‰æ‹©
        fields = self.request.query_params.get('fields')
        if fields:
            context['fields'] = fields.split(',')
        
        return context

class DynamicFieldsMixin:
    """åŠ¨æ€å­—æ®µåºåˆ—åŒ–å™¨æ··å…¥ç±»"""
    
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        
        context = kwargs.get('context', {})
        fields = context.get('fields')
        
        if fields:
            # åªä¿ç•™è¯·æ±‚çš„å­—æ®µ
            allowed = set(fields)
            existing = set(self.fields)
            for field_name in existing - allowed:
                self.fields.pop(field_name)

# ä½¿ç”¨ç¤ºä¾‹
# GET /api/v1/points/profiles/?fields=id,total_points,current_level
```

#### åˆ†é¡µä¼˜åŒ–

```python
from rest_framework.pagination import CursorPagination

class OptimizedCursorPagination(CursorPagination):
    page_size = 20
    page_size_query_param = 'page_size'
    max_page_size = 100
    ordering = '-created_at'
    
    # ä½¿ç”¨æ¸¸æ ‡åˆ†é¡µï¼Œé€‚åˆå¤§æ•°æ®é›†
    def get_paginated_response(self, data):
        return Response({
            'next': self.get_next_link(),
            'previous': self.get_previous_link(),
            'results': data,
            'page_info': {
                'has_next': self.has_next,
                'has_previous': self.has_previous,
                'page_size': self.page_size
            }
        })
```

### 3. ç¼“å­˜ç­–ç•¥

#### Redisç¼“å­˜é…ç½®

```python
# Djangoç¼“å­˜é…ç½®
CACHES = {
    'default': {
        'BACKEND': 'django_redis.cache.RedisCache',
        'LOCATION': 'redis://127.0.0.1:6379/1',
        'OPTIONS': {
            'CLIENT_CLASS': 'django_redis.client.DefaultClient',
            'SERIALIZER': 'django_redis.serializers.json.JSONSerializer',
            'COMPRESSOR': 'django_redis.compressors.zlib.ZlibCompressor',
        },
        'KEY_PREFIX': 'points_system',
        'TIMEOUT': 300,  # 5åˆ†é’Ÿé»˜è®¤è¿‡æœŸ
    }
}

# ç¼“å­˜è£…é¥°å™¨ä½¿ç”¨
from django.core.cache import cache
from functools import wraps

def cache_result(timeout=300, key_func=None):
    """ç»“æœç¼“å­˜è£…é¥°å™¨"""
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            # ç”Ÿæˆç¼“å­˜é”®
            if key_func:
                cache_key = key_func(*args, **kwargs)
            else:
                cache_key = f"{func.__name__}:{hash(str(args) + str(kwargs))}"
            
            # å°è¯•ä»ç¼“å­˜è·å–
            result = cache.get(cache_key)
            if result is not None:
                return result
            
            # æ‰§è¡Œå‡½æ•°å¹¶ç¼“å­˜ç»“æœ
            result = func(*args, **kwargs)
            cache.set(cache_key, result, timeout)
            
            return result
        return wrapper
    return decorator

# ä½¿ç”¨ç¤ºä¾‹
@cache_result(timeout=600, key_func=lambda tenant_id: f"user_levels:{tenant_id}")
def get_user_levels(tenant_id):
    return UserLevel.objects.filter(tenant_id=tenant_id, is_active=True)
```

---

## ğŸ”’ å®‰å…¨æœ€ä½³å®è·µ

### 1. è¾“å…¥éªŒè¯å’Œæ¸…ç†

```python
import re
from django.core.validators import validate_email
from django.core.exceptions import ValidationError

class SecurityValidator:
    """å®‰å…¨éªŒè¯å™¨"""
    
    @staticmethod
    def validate_points_amount(amount):
        """éªŒè¯ç§¯åˆ†æ•°é‡"""
        if not isinstance(amount, int):
            raise ValidationError("ç§¯åˆ†æ•°é‡å¿…é¡»æ˜¯æ•´æ•°")
        
        if amount <= 0:
            raise ValidationError("ç§¯åˆ†æ•°é‡å¿…é¡»å¤§äº0")
        
        if amount > 100000:
            raise ValidationError("å•æ¬¡ç§¯åˆ†æ•°é‡ä¸èƒ½è¶…è¿‡100000")
        
        return amount
    
    @staticmethod
    def validate_reason(reason):
        """éªŒè¯æ“ä½œåŸå› """
        if not reason:
            return reason
        
        # ç§»é™¤å±é™©å­—ç¬¦
        dangerous_chars = ['<', '>', '"', "'", '&', '\n', '\r']
        cleaned_reason = reason
        
        for char in dangerous_chars:
            cleaned_reason = cleaned_reason.replace(char, '')
        
        # é•¿åº¦é™åˆ¶
        if len(cleaned_reason) > 500:
            cleaned_reason = cleaned_reason[:500]
        
        return cleaned_reason.strip()
    
    @staticmethod
    def validate_category(category):
        """éªŒè¯ç§¯åˆ†ç±»åˆ«"""
        valid_categories = [
            'login', 'license', 'referral', 'community', 
            'payment', 'manual', 'vip_upgrade', 'feature_unlock'
        ]
        
        if category not in valid_categories:
            raise ValidationError(f"æ— æ•ˆçš„ç§¯åˆ†ç±»åˆ«: {category}")
        
        return category

# åœ¨åºåˆ—åŒ–å™¨ä¸­ä½¿ç”¨
class PointsOperationSerializer(serializers.Serializer):
    points_amount = serializers.IntegerField(
        validators=[SecurityValidator.validate_points_amount]
    )
    reason = serializers.CharField(
        required=False,
        allow_blank=True,
        validators=[SecurityValidator.validate_reason]
    )
    category = serializers.CharField(
        validators=[SecurityValidator.validate_category]
    )
```

### 2. æƒé™æ§åˆ¶

```python
class SecurePermissionMixin:
    """å®‰å…¨æƒé™æ··å…¥ç±»"""
    
    def check_tenant_access(self, request, obj):
        """æ£€æŸ¥ç§Ÿæˆ·è®¿é—®æƒé™"""
        user_tenant = getattr(request.user, 'tenant', None)
        
        if not user_tenant:
            return False
        
        # æ£€æŸ¥å¯¹è±¡çš„ç§Ÿæˆ·å½’å±
        obj_tenant = getattr(obj, 'tenant', None)
        if obj_tenant and obj_tenant != user_tenant:
            return False
        
        return True
    
    def check_points_operation_permission(self, request, operation_type):
        """æ£€æŸ¥ç§¯åˆ†æ“ä½œæƒé™"""
        from points.services.permission_service import TenantAwarePermissionService
        
        user_tenant = getattr(request.user, 'tenant', None)
        if not user_tenant:
            return False
        
        permissions = TenantAwarePermissionService.get_effective_permissions(
            request.user, user_tenant
        )
        
        permission_map = {
            'earn': 'can_earn_points',
            'spend': 'can_spend_points', 
            'adjust': 'can_adjust_points',
            'manage': 'can_manage_points'
        }
        
        required_permission = permission_map.get(operation_type)
        return permissions.get(required_permission, False)

class SecurePointsViewSet(SecurePermissionMixin, viewsets.ModelViewSet):
    """å®‰å…¨çš„ç§¯åˆ†è§†å›¾é›†"""
    
    def perform_create(self, serializer):
        # æ£€æŸ¥åˆ›å»ºæƒé™
        if not self.check_points_operation_permission(self.request, 'earn'):
            raise PermissionDenied("æ²¡æœ‰ç§¯åˆ†æ“ä½œæƒé™")
        
        # å®¡è®¡æ—¥å¿—
        self.log_operation(
            action='points_earn',
            user=self.request.user,
            data=serializer.validated_data
        )
        
        super().perform_create(serializer)
    
    def log_operation(self, action, user, data):
        """è®°å½•æ“ä½œæ—¥å¿—"""
        from common.models import AuditLog
        
        AuditLog.objects.create(
            action=action,
            user=user,
            ip_address=self.get_client_ip(),
            user_agent=self.request.META.get('HTTP_USER_AGENT', ''),
            data=data,
            timestamp=timezone.now()
        )
    
    def get_client_ip(self):
        """è·å–å®¢æˆ·ç«¯IP"""
        x_forwarded_for = self.request.META.get('HTTP_X_FORWARDED_FOR')
        if x_forwarded_for:
            ip = x_forwarded_for.split(',')[0]
        else:
            ip = self.request.META.get('REMOTE_ADDR')
        return ip
```

### 3. æ•°æ®åŠ å¯†

```python
from cryptography.fernet import Fernet
from django.conf import settings

class DataEncryption:
    """æ•°æ®åŠ å¯†å·¥å…·"""
    
    def __init__(self):
        self.cipher_suite = Fernet(settings.ENCRYPTION_KEY.encode())
    
    def encrypt_sensitive_data(self, data):
        """åŠ å¯†æ•æ„Ÿæ•°æ®"""
        if not data:
            return data
        
        encrypted_data = self.cipher_suite.encrypt(data.encode())
        return encrypted_data.decode()
    
    def decrypt_sensitive_data(self, encrypted_data):
        """è§£å¯†æ•æ„Ÿæ•°æ®"""
        if not encrypted_data:
            return encrypted_data
        
        decrypted_data = self.cipher_suite.decrypt(encrypted_data.encode())
        return decrypted_data.decode()

# åœ¨æ¨¡å‹ä¸­ä½¿ç”¨
class EncryptedUserProfile(models.Model):
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    _encrypted_email = models.TextField()  # å­˜å‚¨åŠ å¯†çš„é‚®ç®±
    _encrypted_phone = models.TextField()  # å­˜å‚¨åŠ å¯†çš„æ‰‹æœºå·
    
    encryption = DataEncryption()
    
    @property
    def email(self):
        return self.encryption.decrypt_sensitive_data(self._encrypted_email)
    
    @email.setter
    def email(self, value):
        self._encrypted_email = self.encryption.encrypt_sensitive_data(value)
    
    @property
    def phone(self):
        return self.encryption.decrypt_sensitive_data(self._encrypted_phone)
    
    @phone.setter
    def phone(self, value):
        self._encrypted_phone = self.encryption.encrypt_sensitive_data(value)
```

---

## ğŸ“Š ç›‘æ§å’Œè°ƒè¯•

### 1. æ—¥å¿—è®°å½•

```python
import logging
import json
from datetime import datetime

# é…ç½®ç»“æ„åŒ–æ—¥å¿—
class StructuredLogger:
    def __init__(self, name):
        self.logger = logging.getLogger(name)
    
    def log_api_request(self, request, response_time=None, status_code=None):
        """è®°å½•APIè¯·æ±‚æ—¥å¿—"""
        log_data = {
            'timestamp': datetime.utcnow().isoformat(),
            'type': 'api_request',
            'method': request.method,
            'path': request.path,
            'user_id': getattr(request.user, 'id', None),
            'tenant_id': getattr(request.user, 'tenant_id', None),
            'ip_address': self.get_client_ip(request),
            'user_agent': request.META.get('HTTP_USER_AGENT', ''),
            'response_time_ms': response_time,
            'status_code': status_code
        }
        
        self.logger.info(json.dumps(log_data))
    
    def log_business_event(self, event_type, user_id, tenant_id, details):
        """è®°å½•ä¸šåŠ¡äº‹ä»¶æ—¥å¿—"""
        log_data = {
            'timestamp': datetime.utcnow().isoformat(),
            'type': 'business_event',
            'event_type': event_type,
            'user_id': user_id,
            'tenant_id': tenant_id,
            'details': details
        }
        
        self.logger.info(json.dumps(log_data))
    
    def log_error(self, error, context=None):
        """è®°å½•é”™è¯¯æ—¥å¿—"""
        log_data = {
            'timestamp': datetime.utcnow().isoformat(),
            'type': 'error',
            'error_message': str(error),
            'error_type': type(error).__name__,
            'context': context or {}
        }
        
        self.logger.error(json.dumps(log_data))

# ä¸­é—´ä»¶è®°å½•è¯·æ±‚
class LoggingMiddleware:
    def __init__(self, get_response):
        self.get_response = get_response
        self.logger = StructuredLogger('api_requests')
    
    def __call__(self, request):
        start_time = time.time()
        
        response = self.get_response(request)
        
        response_time = (time.time() - start_time) * 1000
        
        self.logger.log_api_request(
            request=request,
            response_time=response_time,
            status_code=response.status_code
        )
        
        return response
```

### 2. æ€§èƒ½ç›‘æ§

```python
import time
from functools import wraps
from django.core.cache import cache

class PerformanceMonitor:
    """æ€§èƒ½ç›‘æ§å™¨"""
    
    @staticmethod
    def track_execution_time(func_name=None):
        """è¿½è¸ªå‡½æ•°æ‰§è¡Œæ—¶é—´"""
        def decorator(func):
            @wraps(func)
            def wrapper(*args, **kwargs):
                start_time = time.time()
                
                try:
                    result = func(*args, **kwargs)
                    execution_time = (time.time() - start_time) * 1000
                    
                    # è®°å½•æ€§èƒ½æŒ‡æ ‡
                    PerformanceMonitor.record_metric(
                        metric_name=func_name or func.__name__,
                        value=execution_time,
                        metric_type='execution_time'
                    )
                    
                    return result
                except Exception as e:
                    execution_time = (time.time() - start_time) * 1000
                    
                    # è®°å½•é”™è¯¯æ‰§è¡Œæ—¶é—´
                    PerformanceMonitor.record_metric(
                        metric_name=f"{func_name or func.__name__}_error",
                        value=execution_time,
                        metric_type='error_execution_time'
                    )
                    
                    raise
            
            return wrapper
        return decorator
    
    @staticmethod
    def record_metric(metric_name, value, metric_type='counter'):
        """è®°å½•æ€§èƒ½æŒ‡æ ‡"""
        cache_key = f"metrics:{metric_name}:{int(time.time() // 60)}"  # æŒ‰åˆ†é’Ÿèšåˆ
        
        current_data = cache.get(cache_key, {
            'count': 0,
            'total': 0,
            'min': float('inf'),
            'max': 0,
            'type': metric_type
        })
        
        current_data['count'] += 1
        current_data['total'] += value
        current_data['min'] = min(current_data['min'], value)
        current_data['max'] = max(current_data['max'], value)
        current_data['avg'] = current_data['total'] / current_data['count']
        
        cache.set(cache_key, current_data, 300)  # 5åˆ†é’Ÿè¿‡æœŸ

# ä½¿ç”¨è£…é¥°å™¨
@PerformanceMonitor.track_execution_time('points_calculation')
def calculate_user_points(user_id, tenant_id):
    """è®¡ç®—ç”¨æˆ·ç§¯åˆ†"""
    # å¤æ‚çš„ç§¯åˆ†è®¡ç®—é€»è¾‘
    pass
```

### 3. å¥åº·æ£€æŸ¥

```python
from django.http import JsonResponse
from django.db import connections
from django.core.cache import cache

def health_check(request):
    """ç³»ç»Ÿå¥åº·æ£€æŸ¥"""
    health_status = {
        'status': 'healthy',
        'timestamp': datetime.utcnow().isoformat(),
        'services': {}
    }
    
    # æ•°æ®åº“è¿æ¥æ£€æŸ¥
    try:
        db_conn = connections['default']
        db_conn.ensure_connection()
        health_status['services']['database'] = {
            'status': 'healthy',
            'response_time_ms': 0  # å¯ä»¥æµ‹é‡å®é™…å“åº”æ—¶é—´
        }
    except Exception as e:
        health_status['services']['database'] = {
            'status': 'unhealthy',
            'error': str(e)
        }
        health_status['status'] = 'unhealthy'
    
    # Redisç¼“å­˜æ£€æŸ¥
    try:
        cache.set('health_check', 'ok', 10)
        if cache.get('health_check') == 'ok':
            health_status['services']['redis'] = {'status': 'healthy'}
        else:
            raise Exception("Cache read/write failed")
    except Exception as e:
        health_status['services']['redis'] = {
            'status': 'unhealthy',
            'error': str(e)
        }
        health_status['status'] = 'unhealthy'
    
    # APIæœåŠ¡çŠ¶æ€
    health_status['services']['api'] = {
        'status': 'healthy',
        'version': '1.0.0'
    }
    
    status_code = 200 if health_status['status'] == 'healthy' else 503
    return JsonResponse(health_status, status=status_code)
```

---

## ğŸš€ éƒ¨ç½²å’Œè¿ç»´

### 1. ç¯å¢ƒé…ç½®

```python
# settings/production.py
import os
from .base import *

# å®‰å…¨è®¾ç½®
DEBUG = False
ALLOWED_HOSTS = os.environ.get('ALLOWED_HOSTS', '').split(',')

# æ•°æ®åº“é…ç½®
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': os.environ.get('DB_NAME'),
        'USER': os.environ.get('DB_USER'),
        'PASSWORD': os.environ.get('DB_PASSWORD'),
        'HOST': os.environ.get('DB_HOST', 'localhost'),
        'PORT': os.environ.get('DB_PORT', '5432'),
        'OPTIONS': {
            'MAX_CONNS': 20
        }
    }
}

# Redisé…ç½®
REDIS_URL = os.environ.get('REDIS_URL', 'redis://localhost:6379')

CACHES = {
    'default': {
        'BACKEND': 'django_redis.cache.RedisCache',
        'LOCATION': REDIS_URL,
        'OPTIONS': {
            'CLIENT_CLASS': 'django_redis.client.DefaultClient',
            'CONNECTION_POOL_KWARGS': {
                'max_connections': 50,
                'retry_on_timeout': True
            }
        }
    }
}

# æ—¥å¿—é…ç½®
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'formatters': {
        'verbose': {
            'format': '{levelname} {asctime} {module} {process:d} {thread:d} {message}',
            'style': '{',
        },
        'json': {
            '()': 'pythonjsonlogger.jsonlogger.JsonFormatter',
            'format': '%(levelname)s %(asctime)s %(module)s %(message)s'
        }
    },
    'handlers': {
        'file': {
            'level': 'INFO',
            'class': 'logging.handlers.RotatingFileHandler',
            'filename': '/var/log/points_system/app.log',
            'maxBytes': 1024*1024*10,  # 10MB
            'backupCount': 5,
            'formatter': 'json'
        },
        'console': {
            'level': 'INFO',
            'class': 'logging.StreamHandler',
            'formatter': 'verbose'
        }
    },
    'loggers': {
        'django': {
            'handlers': ['file', 'console'],
            'level': 'INFO',
        },
        'points': {
            'handlers': ['file', 'console'],
            'level': 'INFO',
        }
    }
}

# å®‰å…¨é…ç½®
SECURE_BROWSER_XSS_FILTER = True
SECURE_CONTENT_TYPE_NOSNIFF = True
X_FRAME_OPTIONS = 'DENY'
SECURE_HSTS_SECONDS = 31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS = True
SECURE_HSTS_PRELOAD = True

# APIé™æµ
REST_FRAMEWORK['DEFAULT_THROTTLE_RATES'] = {
    'anon': '100/hour',
    'user': '1000/hour',
    'points_operations': '500/hour'
}
```

### 2. Dockeréƒ¨ç½²

```dockerfile
# Dockerfile
FROM python:3.11-slim

WORKDIR /app

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    build-essential \
    libpq-dev \
    && rm -rf /var/lib/apt/lists/*

# å®‰è£…Pythonä¾èµ–
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# åˆ›å»ºérootç”¨æˆ·
RUN useradd --create-home --shell /bin/bash app
RUN chown -R app:app /app
USER app

# æš´éœ²ç«¯å£
EXPOSE 8000

# å¯åŠ¨å‘½ä»¤
CMD ["gunicorn", "--bind", "0.0.0.0:8000", "--workers", "4", "core.wsgi:application"]
```

```yaml
# docker-compose.yml
version: '3.8'

services:
  db:
    image: postgres:15
    environment:
      POSTGRES_DB: points_system
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  web:
    build: .
    ports:
      - "8000:8000"
    environment:
      - DEBUG=False
      - DB_HOST=db
      - DB_NAME=points_system
      - DB_USER=postgres
      - DB_PASSWORD=password
      - REDIS_URL=redis://redis:6379
    depends_on:
      - db
      - redis
    volumes:
      - ./logs:/var/log/points_system

volumes:
  postgres_data:
  redis_data:
```

### 3. ç›‘æ§å’Œå‘Šè­¦

```python
# monitoring/metrics.py
import time
from prometheus_client import Counter, Histogram, Gauge

# PrometheusæŒ‡æ ‡
api_requests_total = Counter(
    'api_requests_total',
    'Total API requests',
    ['method', 'endpoint', 'status']
)

api_request_duration = Histogram(
    'api_request_duration_seconds',
    'API request duration in seconds',
    ['method', 'endpoint']
)

points_operations_total = Counter(
    'points_operations_total',
    'Total points operations',
    ['operation_type', 'status']
)

active_users_gauge = Gauge(
    'active_users_total',
    'Number of active users'
)

class MetricsMiddleware:
    """PrometheusæŒ‡æ ‡ä¸­é—´ä»¶"""
    
    def __init__(self, get_response):
        self.get_response = get_response
    
    def __call__(self, request):
        start_time = time.time()
        
        response = self.get_response(request)
        
        # è®°å½•è¯·æ±‚æŒ‡æ ‡
        duration = time.time() - start_time
        
        api_requests_total.labels(
            method=request.method,
            endpoint=request.path,
            status=response.status_code
        ).inc()
        
        api_request_duration.labels(
            method=request.method,
            endpoint=request.path
        ).observe(duration)
        
        return response

# monitoring/alerts.py
class AlertManager:
    """å‘Šè­¦ç®¡ç†å™¨"""
    
    def __init__(self):
        self.alert_channels = {
            'email': self.send_email_alert,
            'slack': self.send_slack_alert,
            'sms': self.send_sms_alert
        }
    
    def check_system_health(self):
        """æ£€æŸ¥ç³»ç»Ÿå¥åº·çŠ¶æ€"""
        alerts = []
        
        # æ£€æŸ¥APIå“åº”æ—¶é—´
        avg_response_time = self.get_avg_response_time()
        if avg_response_time > 1000:  # 1ç§’
            alerts.append({
                'type': 'performance',
                'severity': 'warning',
                'message': f'APIå¹³å‡å“åº”æ—¶é—´è¿‡é«˜: {avg_response_time}ms'
            })
        
        # æ£€æŸ¥é”™è¯¯ç‡
        error_rate = self.get_error_rate()
        if error_rate > 0.05:  # 5%
            alerts.append({
                'type': 'error_rate',
                'severity': 'critical',
                'message': f'APIé”™è¯¯ç‡è¿‡é«˜: {error_rate*100:.2f}%'
            })
        
        # æ£€æŸ¥æ•°æ®åº“è¿æ¥
        if not self.check_database_health():
            alerts.append({
                'type': 'database',
                'severity': 'critical',
                'message': 'æ•°æ®åº“è¿æ¥å¼‚å¸¸'
            })
        
        # å‘é€å‘Šè­¦
        for alert in alerts:
            self.send_alert(alert)
    
    def send_alert(self, alert):
        """å‘é€å‘Šè­¦"""
        severity = alert['severity']
        
        if severity == 'critical':
            channels = ['email', 'sms', 'slack']
        elif severity == 'warning':
            channels = ['email', 'slack']
        else:
            channels = ['slack']
        
        for channel in channels:
            try:
                self.alert_channels[channel](alert)
            except Exception as e:
                logger.error(f"å‘é€{channel}å‘Šè­¦å¤±è´¥: {e}")
```

---

## ğŸ“ æ€»ç»“

### å…³é”®æœ€ä½³å®è·µè¦ç‚¹

1. **é”™è¯¯å¤„ç†**
   - ç»Ÿä¸€é”™è¯¯å“åº”æ ¼å¼
   - åˆç†çš„HTTPçŠ¶æ€ç 
   - è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œè§£å†³å»ºè®®
   - å®¢æˆ·ç«¯é‡è¯•æœºåˆ¶

2. **æ€§èƒ½ä¼˜åŒ–**
   - æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
   - é€‚å½“çš„ç¼“å­˜ç­–ç•¥
   - APIå“åº”ä¼˜åŒ–
   - æ‰¹é‡æ“ä½œæ”¯æŒ

3. **å®‰å…¨é˜²æŠ¤**
   - è¾“å…¥éªŒè¯å’Œæ¸…ç†
   - æƒé™æ§åˆ¶å’Œå®¡è®¡
   - æ•æ„Ÿæ•°æ®åŠ å¯†
   - å®‰å…¨é…ç½®å¼ºåŒ–

4. **ç›‘æ§è¿ç»´**
   - ç»“æ„åŒ–æ—¥å¿—è®°å½•
   - æ€§èƒ½æŒ‡æ ‡ç›‘æ§
   - å¥åº·æ£€æŸ¥æœºåˆ¶
   - å‘Šè­¦å’Œé€šçŸ¥ç³»ç»Ÿ

é€šè¿‡éµå¾ªè¿™äº›æœ€ä½³å®è·µï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªç¨³å®šã€å®‰å…¨ã€é«˜æ€§èƒ½çš„å¤šç§Ÿæˆ·ç§¯åˆ†ç³»ç»ŸAPIã€‚

---

## ğŸ“ å­¦ä¹ èµ„æº

- **å®˜æ–¹æ–‡æ¡£**: Django REST Framework æ–‡æ¡£
- **æœ€ä½³å®è·µ**: RESTful API è®¾è®¡æŒ‡å—
- **å®‰å…¨æŒ‡å—**: OWASP API Security Top 10
- **æ€§èƒ½ä¼˜åŒ–**: Python Web åº”ç”¨æ€§èƒ½ä¼˜åŒ–æŒ‡å—
- **ç›‘æ§è¿ç»´**: Prometheus + Grafana ç›‘æ§å®è·µ

---

**ğŸ‰ è‡³æ­¤ï¼Œå¤šç§Ÿæˆ·ç§¯åˆ†ç³»ç»ŸAPIæ–‡æ¡£ç¼–å†™å®Œæˆï¼**
