# ç”¨æˆ·åˆ†çº§è®¾è®¡æ–¹æ¡ˆ

## ğŸ¯ éœ€æ±‚åˆ†æ

### ä¸šåŠ¡éœ€æ±‚
- **ä¸€èˆ¬ç”¨æˆ·**: åŸºç¡€åŠŸèƒ½ä½¿ç”¨è€…
- **VIPç”¨æˆ·**: äº«æœ‰æ›´å¤šæƒé™å’Œé…é¢çš„ç”¨æˆ·
- **è¶…çº§VIPç”¨æˆ·**: æœ€é«˜çº§åˆ«çš„ç”¨æˆ·ï¼Œæ‹¥æœ‰ç‰¹æ®Šæƒé™

### è®¾è®¡ç›®æ ‡
- **å¯æ‰©å±•æ€§**: æ”¯æŒæœªæ¥å¢åŠ æ›´å¤šç”¨æˆ·çº§åˆ«
- **çµæ´»é…ç½®**: æ¯ä¸ªçº§åˆ«å¯ä»¥æœ‰ä¸åŒçš„æƒé™å’Œé…é¢
- **å‘ä¸‹å…¼å®¹**: ä¸å½±å“ç°æœ‰Memberæ¨¡å‹çš„åŸå­æ€§
- **ä¸šåŠ¡é©±åŠ¨**: æ”¯æŒåŸºäºç”¨æˆ·çº§åˆ«çš„è®¸å¯è¯åˆ†é…ç­–ç•¥

## ğŸ—ï¸ æ•´ä½“æ¶æ„è®¾è®¡

### ç”¨æˆ·åˆ†çº§æ¶æ„å›¾

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚           ç”¨æˆ·åˆ†çº§ç³»ç»Ÿ              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                       â”‚                       â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  ç”¨æˆ·ç±»å‹ç®¡ç†   â”‚     â”‚  æƒé™é…ç½®ç®¡ç†   â”‚     â”‚  é…é¢ç­–ç•¥ç®¡ç†   â”‚
   â”‚                 â”‚     â”‚                 â”‚     â”‚                 â”‚
   â”‚â€¢ ç±»å‹å®šä¹‰       â”‚     â”‚â€¢ åŠŸèƒ½æƒé™       â”‚     â”‚â€¢ è®¸å¯è¯é…é¢     â”‚
   â”‚â€¢ ç­‰çº§å±‚æ¬¡       â”‚     â”‚â€¢ æ“ä½œæƒé™       â”‚     â”‚â€¢ ä½¿ç”¨é™åˆ¶       â”‚
   â”‚â€¢ å‡çº§è§„åˆ™       â”‚     â”‚â€¢ æ•°æ®æƒé™       â”‚     â”‚â€¢ æ—¶é—´é™åˆ¶       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                       â”‚                       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚           æ•°æ®æ¨¡å‹å±‚                 â”‚
                    â”‚                                     â”‚
                    â”‚ UserType â†â†’ Member â†â†’ LicenseQuota  â”‚
                    â”‚    â†“           â†“           â†“        â”‚
                    â”‚ ç±»å‹å®šä¹‰    ç”¨æˆ·å®ä¾‹    é…é¢ç­–ç•¥     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š æ•°æ®æ¨¡å‹è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„å…³ç³»å›¾

```
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   UserType      â”‚         â”‚   Tenant        â”‚
     â”‚   (ç”¨æˆ·ç±»å‹)     â”‚         â”‚   (ç§Ÿæˆ·)        â”‚
     â”‚                 â”‚         â”‚                 â”‚
     â”‚ + name          â”‚         â”‚ + name          â”‚
     â”‚ + code          â”‚         â”‚ + settings      â”‚
     â”‚ + level         â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ + permissions   â”‚                   â”‚
     â”‚ + quota_config  â”‚                   â”‚ 1:N
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                   â–¼
               â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ 1:N             â”‚     Member      â”‚
               â”‚                 â”‚   (æˆå‘˜ç”¨æˆ·)     â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
                                 â”‚ + user_type_id  â”‚
                                 â”‚ + upgrade_date  â”‚
                                 â”‚ + expire_date   â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â”‚ 1:N
                                           â–¼
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚LicenseAssignmentâ”‚
                                 â”‚   (è®¸å¯è¯åˆ†é…)   â”‚
                                 â”‚                 â”‚
                                 â”‚ + member_id     â”‚
                                 â”‚ + license_id    â”‚
                                 â”‚ + quota_overrideâ”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1. UserType ç”¨æˆ·ç±»å‹è¡¨

#### è¡¨ç»“æ„è®¾è®¡
```sql
CREATE TABLE user_type (
    id BIGSERIAL PRIMARY KEY,
    
    -- åŸºæœ¬ä¿¡æ¯
    name VARCHAR(50) NOT NULL,                    -- ç±»å‹åç§°ï¼šä¸€èˆ¬ç”¨æˆ·ã€VIPç”¨æˆ·ã€è¶…çº§VIPç”¨æˆ·
    code VARCHAR(20) NOT NULL UNIQUE,            -- ç±»å‹ä»£ç ï¼šnormalã€vipã€super_vip
    description TEXT,                             -- ç±»å‹æè¿°
    
    -- ç­‰çº§å±‚æ¬¡
    level INTEGER NOT NULL DEFAULT 1,            -- ç­‰çº§æ•°å€¼ï¼Œæ•°å€¼è¶Šå¤§ç­‰çº§è¶Šé«˜
    parent_type_id BIGINT REFERENCES user_type(id), -- çˆ¶çº§ç±»å‹ï¼Œæ”¯æŒå±‚çº§ç»“æ„
    
    -- æƒé™é…ç½®
    permissions JSONB DEFAULT '{}',              -- æƒé™é…ç½®
    features JSONB DEFAULT '{}',                 -- åŠŸèƒ½ç‰¹æ€§é…ç½®
    
    -- é…é¢é…ç½®
    license_quota_config JSONB DEFAULT '{}',     -- è®¸å¯è¯é…é¢é…ç½®
    usage_limits JSONB DEFAULT '{}',             -- ä½¿ç”¨é™åˆ¶é…ç½®
    
    -- å‡çº§é…ç½®
    upgrade_requirements JSONB DEFAULT '{}',     -- å‡çº§æ¡ä»¶
    auto_upgrade_enabled BOOLEAN DEFAULT FALSE,  -- æ˜¯å¦æ”¯æŒè‡ªåŠ¨å‡çº§
    
    -- çŠ¶æ€ç®¡ç†
    is_active BOOLEAN NOT NULL DEFAULT TRUE,     -- æ˜¯å¦å¯ç”¨
    is_default BOOLEAN NOT NULL DEFAULT FALSE,   -- æ˜¯å¦é»˜è®¤ç±»å‹
    
    -- å®¡è®¡å­—æ®µ
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
    created_by_id BIGINT,
    
    -- çº¦æŸ
    CONSTRAINT valid_level CHECK (level > 0),
    CONSTRAINT unique_default_type UNIQUE (is_default) WHERE is_default = TRUE
);

-- ç´¢å¼•
CREATE INDEX idx_user_type_code ON user_type (code);
CREATE INDEX idx_user_type_level ON user_type (level);
CREATE INDEX idx_user_type_active ON user_type (is_active) WHERE is_active = TRUE;

-- æ³¨é‡Š
COMMENT ON TABLE user_type IS 'ç”¨æˆ·ç±»å‹è¡¨ï¼Œå®šä¹‰ä¸åŒçº§åˆ«ç”¨æˆ·çš„æƒé™å’Œé…é¢';
COMMENT ON COLUMN user_type.level IS 'ç­‰çº§æ•°å€¼ï¼Œ1=ä¸€èˆ¬ç”¨æˆ·ï¼Œ2=VIPç”¨æˆ·ï¼Œ3=è¶…çº§VIPç”¨æˆ·';
COMMENT ON COLUMN user_type.permissions IS 'æƒé™é…ç½®ï¼š{"license_assign": true, "admin_access": false}';
COMMENT ON COLUMN user_type.license_quota_config IS 'è®¸å¯è¯é…é¢ï¼š{"max_licenses": 5, "max_devices_per_license": 3}';
```

#### åˆå§‹æ•°æ®é…ç½®
```sql
-- æ’å…¥é»˜è®¤ç”¨æˆ·ç±»å‹
INSERT INTO user_type (name, code, level, description, permissions, license_quota_config, is_default) VALUES
('ä¸€èˆ¬ç”¨æˆ·', 'normal', 1, 'åŸºç¡€åŠŸèƒ½ç”¨æˆ·', 
 '{"license_request": true, "basic_features": true}',
 '{"max_licenses": 2, "max_devices_per_license": 1, "license_duration_days": 365}',
 TRUE),

('VIPç”¨æˆ·', 'vip', 2, 'é«˜çº§åŠŸèƒ½ç”¨æˆ·',
 '{"license_request": true, "advanced_features": true, "priority_support": true}',
 '{"max_licenses": 10, "max_devices_per_license": 3, "license_duration_days": 730}',
 FALSE),

('è¶…çº§VIPç”¨æˆ·', 'super_vip', 3, 'æœ€é«˜çº§ç”¨æˆ·',
 '{"license_request": true, "all_features": true, "priority_support": true, "batch_operations": true}',
 '{"max_licenses": 50, "max_devices_per_license": 10, "license_duration_days": 1095, "unlimited_usage": true}',
 FALSE);
```

### 2. Memberè¡¨æ‰©å±•è®¾è®¡

#### æ·»åŠ ç”¨æˆ·ç±»å‹å…³è”
```sql
-- ä¸ºMemberè¡¨æ·»åŠ ç”¨æˆ·ç±»å‹å­—æ®µ
ALTER TABLE member ADD COLUMN user_type_id BIGINT REFERENCES user_type(id);
ALTER TABLE member ADD COLUMN user_type_upgrade_date TIMESTAMP WITH TIME ZONE;
ALTER TABLE member ADD COLUMN user_type_expire_date TIMESTAMP WITH TIME ZONE;
ALTER TABLE member ADD COLUMN user_type_notes TEXT;

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_member_user_type ON member (user_type_id);
CREATE INDEX idx_member_type_expire ON member (user_type_expire_date) 
WHERE user_type_expire_date IS NOT NULL;

-- æ³¨é‡Š
COMMENT ON COLUMN member.user_type_id IS 'ç”¨æˆ·ç±»å‹IDï¼Œå…³è”user_typeè¡¨';
COMMENT ON COLUMN member.user_type_upgrade_date IS 'ç”¨æˆ·ç±»å‹å‡çº§æ—¶é—´';
COMMENT ON COLUMN member.user_type_expire_date IS 'ç”¨æˆ·ç±»å‹è¿‡æœŸæ—¶é—´ï¼ŒNULLè¡¨ç¤ºæ°¸ä¸è¿‡æœŸ';
COMMENT ON COLUMN member.user_type_notes IS 'ç”¨æˆ·ç±»å‹ç›¸å…³å¤‡æ³¨';
```

#### æ•°æ®è¿ç§»è„šæœ¬
```sql
-- ä¸ºç°æœ‰ç”¨æˆ·è®¾ç½®é»˜è®¤ç±»å‹
UPDATE member 
SET user_type_id = (SELECT id FROM user_type WHERE code = 'normal' AND is_default = TRUE)
WHERE user_type_id IS NULL;

-- æ·»åŠ éç©ºçº¦æŸ
ALTER TABLE member ALTER COLUMN user_type_id SET NOT NULL;
```

## ğŸ”§ ä¸šåŠ¡é€»è¾‘è®¾è®¡

### ç”¨æˆ·ç±»å‹æœåŠ¡ (UserTypeService)

#### æ ¸å¿ƒåŠŸèƒ½è®¾è®¡

##### 1. ç”¨æˆ·ç±»å‹ç®¡ç†
```
åŠŸèƒ½æ¨¡å—                    æè¿°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç±»å‹å®šä¹‰ç®¡ç†                åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ç”¨æˆ·ç±»å‹
æƒé™é…ç½®ç®¡ç†                é…ç½®æ¯ä¸ªç±»å‹çš„åŠŸèƒ½æƒé™
é…é¢ç­–ç•¥ç®¡ç†                è®¾ç½®è®¸å¯è¯é…é¢å’Œé™åˆ¶
å‡çº§è§„åˆ™ç®¡ç†                å®šä¹‰ç”¨æˆ·å‡çº§æ¡ä»¶å’Œæµç¨‹
```

##### 2. ç”¨æˆ·å‡çº§æœåŠ¡
```
å‡çº§è§¦å‘æ–¹å¼               è¯´æ˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ‰‹åŠ¨å‡çº§                    ç®¡ç†å‘˜æ‰‹åŠ¨æ“ä½œå‡çº§
è‡ªåŠ¨å‡çº§                    åŸºäºæ¡ä»¶è‡ªåŠ¨è§¦å‘å‡çº§
ä»˜è´¹å‡çº§                    åŸºäºä»˜è´¹è´­ä¹°å‡çº§
æ—¶é—´å‡çº§                    åŸºäºæ—¶é—´å‘¨æœŸå‡çº§
```

##### 3. æƒé™æ£€æŸ¥æœåŠ¡
```
æƒé™æ£€æŸ¥èŒƒå›´               æ£€æŸ¥å†…å®¹
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åŠŸèƒ½æƒé™                    ç”¨æˆ·å¯ä»¥ä½¿ç”¨å“ªäº›åŠŸèƒ½
è®¸å¯è¯æƒé™                  ç”¨æˆ·å¯ä»¥ç”³è¯·å¤šå°‘è®¸å¯è¯
æ“ä½œæƒé™                    ç”¨æˆ·å¯ä»¥æ‰§è¡Œå“ªäº›æ“ä½œ
æ•°æ®æƒé™                    ç”¨æˆ·å¯ä»¥è®¿é—®å“ªäº›æ•°æ®
```

### ä¸è®¸å¯è¯åˆ†é…çš„é›†æˆ

#### åˆ†é…ç­–ç•¥è°ƒæ•´

##### åŸºäºç”¨æˆ·ç±»å‹çš„é…é¢æ§åˆ¶
```
ä¸€èˆ¬ç”¨æˆ·é™åˆ¶ï¼š
â”œâ”€ æœ€å¤§è®¸å¯è¯æ•°é‡: 2ä¸ª
â”œâ”€ æ¯ä¸ªè®¸å¯è¯æœ€å¤§è®¾å¤‡æ•°: 1å°
â”œâ”€ è®¸å¯è¯æœ‰æ•ˆæœŸ: 1å¹´
â””â”€ ä¸æ”¯æŒæ‰¹é‡æ“ä½œ

VIPç”¨æˆ·æƒé™ï¼š
â”œâ”€ æœ€å¤§è®¸å¯è¯æ•°é‡: 10ä¸ª  
â”œâ”€ æ¯ä¸ªè®¸å¯è¯æœ€å¤§è®¾å¤‡æ•°: 3å°
â”œâ”€ è®¸å¯è¯æœ‰æ•ˆæœŸ: 2å¹´
â”œâ”€ æ”¯æŒä¼˜å…ˆçº§å¤„ç†
â””â”€ æ”¯æŒé«˜çº§åŠŸèƒ½

è¶…çº§VIPç”¨æˆ·æƒé™ï¼š
â”œâ”€ æœ€å¤§è®¸å¯è¯æ•°é‡: 50ä¸ª
â”œâ”€ æ¯ä¸ªè®¸å¯è¯æœ€å¤§è®¾å¤‡æ•°: 10å°
â”œâ”€ è®¸å¯è¯æœ‰æ•ˆæœŸ: 3å¹´
â”œâ”€ æ”¯æŒæ‰¹é‡æ“ä½œ
â”œâ”€ æ”¯æŒæ‰€æœ‰é«˜çº§åŠŸèƒ½
â””â”€ æ— ä½¿ç”¨é™åˆ¶
```

##### è®¸å¯è¯åˆ†é…æµç¨‹è°ƒæ•´
```
åŸæµç¨‹: ç”¨æˆ·ç”³è¯· â†’ é…é¢æ£€æŸ¥ â†’ åˆ›å»ºåˆ†é…
æ–°æµç¨‹: ç”¨æˆ·ç”³è¯· â†’ ç”¨æˆ·ç±»å‹æ£€æŸ¥ â†’ ç±»å‹é…é¢æ£€æŸ¥ â†’ Licenseé…é¢æ£€æŸ¥ â†’ åˆ›å»ºåˆ†é…
```

## ğŸš€ æ‰©å±•æ€§è®¾è®¡

### 1. çµæ´»çš„ç±»å‹ç³»ç»Ÿ

#### å±‚çº§åŒ–ç”¨æˆ·ç±»å‹
```
ç”¨æˆ·ç±»å‹å±‚çº§ç¤ºä¾‹ï¼š

åŸºç¡€ç”¨æˆ· (Level 1)
â”œâ”€ è¯•ç”¨ç”¨æˆ· (Level 1.1)
â””â”€ æ ‡å‡†ç”¨æˆ· (Level 1.2)

VIPç”¨æˆ· (Level 2)  
â”œâ”€ é‡‘ç‰ŒVIP (Level 2.1)
â”œâ”€ ç™½é‡‘VIP (Level 2.2)
â””â”€ é’»çŸ³VIP (Level 2.3)

ä¼ä¸šç”¨æˆ· (Level 3)
â”œâ”€ å°å‹ä¼ä¸š (Level 3.1)
â”œâ”€ ä¸­å‹ä¼ä¸š (Level 3.2)
â””â”€ å¤§å‹ä¼ä¸š (Level 3.3)
```

#### åŠ¨æ€æƒé™é…ç½®
```json
{
  "permissions": {
    "license_management": {
      "request": true,
      "batch_request": false,
      "transfer": false,
      "revoke_own": true
    },
    "features": {
      "advanced_analytics": false,
      "api_access": true,
      "custom_branding": false,
      "priority_support": false
    },
    "limits": {
      "api_rate_limit": 1000,
      "concurrent_sessions": 3,
      "storage_quota_gb": 10
    }
  }
}
```

### 2. å¯é…ç½®çš„å‡çº§æœºåˆ¶

#### å‡çº§æ¡ä»¶é…ç½®
```json
{
  "upgrade_requirements": {
    "to_vip": {
      "methods": [
        {
          "type": "payment",
          "amount": 99.00,
          "currency": "CNY",
          "duration_months": 12
        },
        {
          "type": "usage_based", 
          "criteria": {
            "active_licenses": 5,
            "usage_days": 30,
            "feature_usage_score": 80
          }
        }
      ]
    },
    "to_super_vip": {
      "methods": [
        {
          "type": "payment",
          "amount": 299.00,
          "currency": "CNY", 
          "duration_months": 12
        },
        {
          "type": "invitation",
          "required_referrals": 5,
          "enterprise_customer": true
        }
      ]
    }
  }
}
```

### 3. æœªæ¥æ‰©å±•æ–¹å‘

#### å¯æ‰©å±•çš„åŠŸèƒ½æ¨¡å—
```
å½“å‰åŠŸèƒ½æ¨¡å—              æœªæ¥æ‰©å±•æ–¹å‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åŸºç¡€ç”¨æˆ·åˆ†çº§             â†’ ç»†åˆ†è¡Œä¸šç”¨æˆ·ç±»å‹
ç®€å•æƒé™æ§åˆ¶             â†’ åŸºäºè§’è‰²çš„å¤æ‚æƒé™ç³»ç»Ÿ
å›ºå®šé…é¢ç®¡ç†             â†’ åŠ¨æ€é…é¢å’Œå¼¹æ€§è®¡è´¹
æ‰‹åŠ¨å‡çº§æµç¨‹             â†’ æ™ºèƒ½æ¨èå‡çº§ç³»ç»Ÿ
å•ä¸€å‡çº§è·¯å¾„             â†’ å¤šç»´åº¦å‡çº§è·¯å¾„
```

#### é›†æˆæ‰©å±•ç‚¹
```
æ‰©å±•æ¥å£                  è¯´æ˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
UserTypePlugin          ç”¨æˆ·ç±»å‹æ’ä»¶æ¥å£
UpgradeStrategyPlugin   å‡çº§ç­–ç•¥æ’ä»¶æ¥å£  
QuotaCalculatorPlugin   é…é¢è®¡ç®—æ’ä»¶æ¥å£
PermissionProviderPlugin æƒé™æä¾›è€…æ’ä»¶æ¥å£
NotificationPlugin      é€šçŸ¥æ’ä»¶æ¥å£
```

## ğŸ’¡ å®æ–½å»ºè®®

### é˜¶æ®µæ€§å®æ–½è®¡åˆ’

#### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ¡†æ¶ (2å‘¨)
1. åˆ›å»ºUserTypeè¡¨å’ŒåŸºç¡€æ•°æ®
2. æ‰©å±•Memberè¡¨å¢åŠ ç±»å‹å…³è”
3. å®ç°åŸºç¡€çš„ç”¨æˆ·ç±»å‹æœåŠ¡
4. é›†æˆåˆ°ç°æœ‰è®¸å¯è¯åˆ†é…æµç¨‹

#### ç¬¬äºŒé˜¶æ®µï¼šæƒé™é›†æˆ (2å‘¨)  
1. å®ç°åŸºäºç”¨æˆ·ç±»å‹çš„æƒé™æ£€æŸ¥
2. è°ƒæ•´APIæƒé™æ§åˆ¶é€»è¾‘
3. å®ç°ç”¨æˆ·ç±»å‹é…é¢æ£€æŸ¥
4. æ·»åŠ ç”¨æˆ·ç±»å‹ç®¡ç†ç•Œé¢

#### ç¬¬ä¸‰é˜¶æ®µï¼šå‡çº§æœºåˆ¶ (2å‘¨)
1. å®ç°ç”¨æˆ·å‡çº§æœåŠ¡
2. æ”¯æŒæ‰‹åŠ¨å’Œè‡ªåŠ¨å‡çº§
3. æ·»åŠ å‡çº§å®¡æ‰¹æµç¨‹
4. å®ç°å‡çº§é€šçŸ¥æœºåˆ¶

#### ç¬¬å››é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ (2å‘¨)
1. å®ç°å±‚çº§åŒ–ç”¨æˆ·ç±»å‹
2. æ”¯æŒåŠ¨æ€æƒé™é…ç½®
3. å®ç°æ™ºèƒ½å‡çº§æ¨è
4. æ·»åŠ ç”¨æˆ·ç±»å‹åˆ†ææŠ¥è¡¨

### æŠ€æœ¯å®æ–½è¦ç‚¹

#### 1. æ•°æ®ä¸€è‡´æ€§ä¿è¯
- ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ç¡®ä¿ç”¨æˆ·å‡çº§çš„åŸå­æ€§
- å®ç°è½¯åˆ é™¤æœºåˆ¶ï¼Œä¿ç•™ç”¨æˆ·ç±»å‹å˜æ›´å†å²
- å®šæœŸåŒæ­¥æ£€æŸ¥ç”¨æˆ·ç±»å‹ä¸æƒé™çš„ä¸€è‡´æ€§

#### 2. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
- ç¼“å­˜ç”¨æˆ·ç±»å‹æƒé™é…ç½®
- ä½¿ç”¨Redisç¼“å­˜ç”¨æˆ·ç­‰çº§ä¿¡æ¯
- æ‰¹é‡å¤„ç†ç”¨æˆ·ç±»å‹å˜æ›´æ“ä½œ

#### 3. å®‰å…¨è€ƒè™‘
- ç”¨æˆ·ç±»å‹å‡çº§éœ€è¦å®¡æ‰¹æµç¨‹
- è®°å½•æ‰€æœ‰ç”¨æˆ·ç±»å‹å˜æ›´çš„å®¡è®¡æ—¥å¿—
- é˜²æ­¢ç”¨æˆ·ç±»å‹é™çº§å¯¼è‡´çš„æƒé™æå‡

---

**ä¸‹ä¸€æ­¥**: è¿™ä¸ªç”¨æˆ·åˆ†çº§ç³»ç»Ÿè®¾è®¡æ—¢æ»¡è¶³äº†å½“å‰çš„ä¸‰çº§åˆ†ç±»éœ€æ±‚ï¼Œåˆä¸ºæœªæ¥çš„æ‰©å±•é¢„ç•™äº†å……åˆ†çš„ç©ºé—´ã€‚é€šè¿‡å±‚çº§åŒ–å’Œå¯é…ç½®çš„è®¾è®¡ï¼Œå¯ä»¥çµæ´»åº”å¯¹å„ç§ä¸šåŠ¡åœºæ™¯çš„å˜åŒ–ã€‚
