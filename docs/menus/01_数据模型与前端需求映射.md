# 菜单系统 - 数据模型与前端需求映射

## 概述

本文档描述了后端菜单系统与前端路由配置的映射关系，帮助前端开发人员理解如何将后端菜单数据转换为前端路由配置。

## 数据模型映射表

下表展示了后端`Menu`模型字段与前端路由配置对象的映射关系：

| 后端模型字段 | 前端路由字段 | 说明 |
|------------|------------|------|
| `name` | `name` | 路由名称，必须唯一 |
| `path` | `path` | 路由路径 |
| `component` | `component` | 组件路径 |
| `redirect` | `redirect` | 重定向路径 |

### 元数据(Meta)映射

| 后端模型字段 | 前端路由字段 | 说明 |
|------------|------------|------|
| `title` | `meta.title` | 菜单标题 |
| `icon` | `meta.icon` | 菜单图标 |
| `extra_icon` | `meta.extraIcon` | 额外图标 |
| `rank` | `meta.rank` | 菜单排序 |
| `show_link` | `meta.showLink` | 是否在菜单中显示 |
| `show_parent` | `meta.showParent` | 是否显示父级菜单 |
| `roles` | `meta.roles` | 页面级别权限设置 |
| `auths` | `meta.auths` | 按钮级别权限设置 |
| `keep_alive` | `meta.keepAlive` | 是否缓存该路由页面 |
| `frame_src` | `meta.frameSrc` | iframe链接地址 |
| `frame_loading` | `meta.frameLoading` | iframe是否开启首次加载动画 |
| `hidden_tag` | `meta.hiddenTag` | 禁止添加到标签页 |
| `dynamic_level` | `meta.dynamicLevel` | 标签页最大数量 |
| `active_path` | `meta.activePath` | 激活菜单的路径 |

### 转场动画映射

| 后端模型字段 | 前端路由字段 | 说明 |
|------------|------------|------|
| `transition_name` | `meta.transition.name` | 页面动画名称 |
| `enter_transition` | `meta.transition.enterTransition` | 进场动画 |
| `leave_transition` | `meta.transition.leaveTransition` | 离场动画 |

## 树形结构映射

后端的菜单树形结构通过`parent_id`字段维护，对应前端路由配置中的`children`数组：

```
后端结构                           前端路由结构
└── 父菜单 (parent_id: null)      {
    ├── 子菜单1 (parent_id: 1)      path: '/parent',
    └── 子菜单2 (parent_id: 1)      children: [
                                     { path: '/parent/child1' },
                                     { path: '/parent/child2' }
                                   ]
                                  }
```

## 状态字段

后端`is_active`字段控制菜单是否可用，在转换为前端路由时，非活动状态的菜单不会包含在返回数据中。

## 数据流向

```
┌───────────────┐      ┌───────────────┐      ┌───────────────┐
│  后端菜单模型  │ ──►  │  API响应数据  │ ──►  │ 前端路由配置  │
└───────────────┘      └───────────────┘      └───────────────┘
```

## 完整映射示例

### 后端菜单数据

```json
{
  "id": 1,
  "name": "仪表盘",
  "code": "dashboard",
  "path": "/dashboard",
  "component": "layout/Dashboard",
  "redirect": null,
  "title": "",
  "icon": "dashboard",
  "extra_icon": null,
  "rank": 1,
  "show_link": true,
  "show_parent": true,
  "roles": [],
  "auths": [],
  "keep_alive": false,
  "frame_src": null,
  "frame_loading": true,
  "hidden_tag": false,
  "dynamic_level": null,
  "active_path": null,
  "transition_name": null,
  "enter_transition": null,
  "leave_transition": null,
  "parent_id": null,
  "is_active": true,
  "remarks": "系统仪表盘",
  "created_at": "2023-01-01T08:00:00+08:00",
  "updated_at": "2023-01-01T08:00:00+08:00"
}
```

### 转换后的前端路由配置

```json
{
  "path": "/dashboard",
  "name": "dashboard",
  "component": "layout/Dashboard",
  "meta": {
    "title": "",
    "icon": "dashboard",
    "extraIcon": null,
    "rank": 1,
    "showLink": true,
    "showParent": true,
    "keepAlive": false,
    "frameSrc": null,
    "frameLoading": true,
    "hiddenTag": false,
    "dynamicLevel": null,
    "activePath": null,
    "roles": [],
    "auths": []
  }
}
```

## 兼容性分析

当前的后端模型设计完全覆盖了前端所需的路由配置字段，具有良好的兼容性。两者在字段命名上有所差异，主要是前端使用驼峰命名法而后端使用下划线命名法，但映射关系明确，可以轻松进行转换。

## 重要字段说明

1. **id**: 菜单唯一标识符，用于关联父子菜单
2. **parent_id**: 父菜单ID，顶级菜单为null（不是0）
3. **rank**: 菜单排序值，值越小排序越靠前
4. **code**: 菜单系统内部的唯一标识码，便于权限管理
5. **is_active**: 控制菜单是否可用，非活动菜单不会显示 