# 菜单管理功能集成计划

## 功能概述

本计划旨在实现菜单管理功能，允许超级管理员通过用户界面创建、编辑、删除和组织菜单项。菜单管理功能将完全集成到现有的管理界面中，并支持多级菜单结构的维护。

## 主要功能

1. 菜单列表展示 - 以树形结构展示所有菜单项
2. 菜单创建 - 创建新的菜单项，支持设置菜单属性和元数据
3. 菜单编辑 - 修改现有菜单项的属性和元数据
4. 菜单删除 - 删除菜单项及其子菜单
5. 菜单排序 - 调整菜单项的显示顺序
6. 菜单状态切换 - 启用/禁用菜单项

## 技术架构

菜单管理功能将采用与现有租户管理功能相似的架构：

```
┌───────────────────────────────────────────────────────┐
│                      菜单管理功能                      │
├───────────────────────────────────────────────────────┤
│                                                       │
│  ┌────────────┐      ┌────────────┐     ┌──────────┐  │
│  │            │      │            │     │          │  │
│  │  API模块   │◄────►│  状态管理  │◄───►│ 组件系统 │  │
│  │            │      │            │     │          │  │
│  └────────────┘      └────────────┘     └──────────┘  │
│                                                       │
└───────────────────────────────────────────────────────┘
```

## 实施步骤

### 1. 创建API模块 (src/api/modules/menu.ts)

实现与后端API交互的函数：

- 获取菜单列表 (`getMenuList`)
- 获取树形菜单结构 (`getMenuTree`)
- 创建菜单 (`createMenu`)
- 更新菜单 (`updateMenu`)
- 删除菜单 (`deleteMenu`)
- 切换菜单状态 (`toggleMenuStatus`)

### 2. 创建类型定义 (src/types/menu.ts)

定义菜单相关的TypeScript接口：

- 菜单项 (`Menu`)
- 菜单元数据 (`MenuMeta`)
- 菜单API参数和响应 (`MenuParams`, `MenuCreateUpdateParams`)

### 3. 创建状态管理 (src/store/modules/menu.ts)

使用Pinia实现菜单状态管理：

- 菜单列表状态 (`menuList`)
- 菜单树状态 (`menuTree`)
- 当前选中菜单 (`currentMenu`)
- 加载状态 (`loading`)
- 菜单操作方法 (CRUD操作)

### 4. 创建组件

- 菜单表单组件 (`src/components/MenuManagement/MenuForm.vue`)
- 菜单树组件 (`src/components/MenuManagement/MenuTree.vue`)
- 确认对话框组件 (`src/components/MenuManagement/ConfirmDialog.vue`)

### 5. 创建视图

- 菜单管理视图 (`src/views/menu/index.vue`)
- 菜单创建视图 (`src/views/menu/create.vue`)
- 菜单编辑视图 (`src/views/menu/edit.vue`)

### 6. 添加路由配置

在路由文件中添加菜单管理相关路由：

```js
{
  path: "/menu",
  component: Layout,
  redirect: "/menu/index",
  meta: { title: "菜单管理", icon: "menu" },
  children: [
    {
      path: "index",
      component: () => import("@/views/menu/index"),
      name: "MenuManagement",
      meta: { title: "菜单列表" }
    },
    {
      path: "create",
      component: () => import("@/views/menu/create"),
      name: "MenuCreate",
      meta: { title: "创建菜单" }
    },
    {
      path: "edit/:id",
      component: () => import("@/views/menu/edit"),
      name: "MenuEdit",
      meta: { title: "编辑菜单" }
    }
  ]
}
```

### 7. 添加国际化文本

在 `locales/zh-CN.yaml` 和 `locales/en.yaml` 中添加菜单管理相关的文本：

- 菜单属性标签
- 按钮文本
- 操作提示
- 错误消息

## 文件结构

```
src/
├── api/
│   └── modules/
│       └── menu.ts                 # 菜单API模块
├── components/
│   └── MenuManagement/
│       ├── ConfirmDialog.vue       # 确认对话框组件
│       ├── MenuForm.vue            # 菜单表单组件
│       └── MenuTree.vue            # 菜单树组件
├── store/
│   └── modules/
│       └── menu.ts                 # 菜单状态管理
├── types/
│   └── menu.ts                     # 菜单类型定义
└── views/
    └── menu/
        ├── create.vue              # 创建菜单视图
        ├── edit.vue                # 编辑菜单视图
        └── index.vue               # 菜单管理主视图
```

## 注意事项

1. 权限控制 - 仅允许超级管理员访问菜单管理功能
2. 数据验证 - 确保所有表单输入都有适当的验证规则
3. 错误处理 - 妥善处理API请求错误和用户输入错误
4. 用户体验 - 添加适当的加载状态、成功/失败提示
5. 国际化 - 确保所有文本都支持中文和英文

## 实施计划

1. 创建API模块和类型定义
2. 实现状态管理
3. 开发组件
4. 创建视图
5. 添加路由配置
6. 添加国际化文本
7. 测试和调试

## 预期结果

完成实施后，管理员将能够通过用户界面管理系统菜单，实现动态配置应用导航结构，提高系统的灵活性和可维护性。

## 技术依赖

- Vue 3
- TypeScript
- Pinia
- Element Plus
- Vue Router
- Vue I18n 